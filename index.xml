<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>yicixin&#39;s blog</title>
    <link>https://www.yici.xin/</link>
    <description>Recent content on yicixin&#39;s blog</description>
    <image>
      <url>https://www.yici.xin/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://www.yici.xin/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 16 May 2023 21:26:57 +0800</lastBuildDate><atom:link href="https://www.yici.xin/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>RuståŠ¨æ€æ•°ç»„Vector</title>
      <link>https://www.yici.xin/post/tech/rust%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84vector/</link>
      <pubDate>Tue, 16 May 2023 21:26:57 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/rust%E5%8A%A8%E6%80%81%E6%95%B0%E7%BB%84vector/</guid>
      <description>åœ¨Rustä¸­ï¼ŒåŠ¨æ€æ•°ç»„è¢«ç§°ä¸º&amp;quot;Vec&amp;quot;æˆ–&amp;quot;Vector&amp;quot;ã€‚Vectoræ˜¯ä¸€ç§åœ¨å †ä¸Šåˆ†é…å†…å­˜çš„é›†åˆç±»å‹ï¼Œå…è®¸ä½ å­˜å‚¨å¤šä¸ªå€¼ã€‚å®ƒçš„å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå¢å‡ã€‚
åˆ›å»ºVector åˆ›å»ºruståŠ¨æ€æ•°ç»„æœ‰å¥½å‡ ç§æ–¹å¼
```rust let v: Vec = Vec::new(); ``` ```rust let v: Vec = Vec::with_capacity(capacity) ``` ```rust let v = vec![1, 2, 3]; ``` è¯»å–å…ƒç´  Vecè¯»å–æŒ‡å®šä½ç½®çš„å…ƒç´ æœ‰ä¸¤ç§æ–¹å¼
ä½¿ç”¨ä¸‹æ ‡ ä½¿ç”¨get ```rust fn main() { let v = vec![1, 2, 3, 4, 5]; let third: &amp;i32 = &amp;v[2]; println!(&#34;ç¬¬ä¸‰ä¸ªå…ƒç´ æ˜¯ {}&#34;, third); } ``` ```rust fn main() { let v = vec![1, 2, 3, 4, 5]; match v.get(2) { Some(third) =&gt; println!(&#34;ç¬¬ä¸‰ä¸ªå…ƒç´ æ˜¯ {third}&#34;), None =&gt; println!</description>
    </item>
    
    <item>
      <title>Http2.0å’Œ3.0</title>
      <link>https://www.yici.xin/post/tech/http2.0%E5%92%8C3.0/</link>
      <pubDate>Fri, 24 Mar 2023 22:40:52 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/http2.0%E5%92%8C3.0/</guid>
      <description>HTTP2.0 HTTP/2 æ˜¯ HTTP/1.1 çš„æ›¿ä»£è€…ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯æ”¹è¿›ç½‘ç»œæ€§èƒ½ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ä¸ HTTP/1.1 ç›¸æ¯”ï¼ŒHTTP/2 å…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¸»è¦ä¼˜ç‚¹ï¼š
å¤šè·¯å¤ç”¨ æœåŠ¡ç«¯æ¨é€ äºŒè¿›åˆ¶åˆ†å¸§ æµé‡æ§åˆ¶ å¤šè·¯å¤ç”¨ å¤šè·¯å¤ç”¨ï¼šåœ¨ HTTP/1.1 ä¸­ï¼Œå¦‚æœè¦åŠ è½½ä¸€ä¸ªç½‘é¡µï¼Œæµè§ˆå™¨éœ€è¦åˆ›å»ºä¸€ä¸ªä¸ªçš„è¿æ¥æ¥è¯·æ±‚æ‰€æœ‰çš„èµ„æºï¼ˆä¾‹å¦‚å›¾ç‰‡ã€CSS æ–‡ä»¶å’Œ JavaScript æ–‡ä»¶ï¼‰ã€‚è¿™æ ·ä¼šé€ æˆå¤§é‡çš„è¿æ¥å»ºç«‹å’Œå…³é—­ï¼Œé™ä½äº†æ•ˆç‡ã€‚HTTP/2 å…è®¸åœ¨åŒä¸€ä¸ªè¿æ¥ä¸ŠåŒæ—¶ä¼ è¾“å¤šä¸ªè¯·æ±‚å’Œå“åº”ï¼Œä»è€Œå¤§å¤§æé«˜äº†æ•ˆç‡ã€‚
è¿™è§£å†³äº†ä¸€éƒ¨åˆ†çš„HTTP1.0é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œå¯ä»¥å‡è®¾è¿™ä¹ˆä¸€ä¸ªæƒ…å†µï¼Œä¸€ä¸ªè¾ƒå¤§çš„jsæ–‡ä»¶å’Œä¸€ä¸ªè¾ƒå°çš„cssæ–‡ä»¶éƒ½éœ€è¦ä¼ è¾“ï¼Œä½†æ˜¯å¦‚æœjsæ–‡ä»¶å…ˆäºcssæ–‡ä»¶ï¼Œé‚£ä¹ˆcssæ–‡ä»¶å°±è¦ç­‰åˆ°jsæ–‡ä»¶ä¼ è¾“å®Œä¹‹åæ‰èƒ½è¿›è¡Œä¼ è¾“ï¼Œå³ä½¿å®ƒæ¯”è¾ƒå°ï¼Œå…¶å®å¯ä»¥æ›´æ—©çš„ä¼ è¾“å¹¶ä½¿ç”¨ã€‚ä½¿ç”¨å¤šè·¯å¤ç”¨åï¼Œç›¸å½“äºå‘ä¸€éƒ¨åˆ†jsçš„åŒ…ï¼Œå‘ä¸€éƒ¨åˆ†cssçš„åŒ…ï¼Œè¿™æ ·è¾ƒå°çš„cssåŒ…å¯ä»¥æ›´æ—©çš„ä¼ è¾“å®Œæ¯•ã€‚
è¿™åœ¨http1.0ä¸­æ˜¯æ— æ³•å®ç°çš„ï¼Œä¸»è¦é—®é¢˜æ˜¯ HTTP/1.1 æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬åè®®ï¼Œå®ƒåªåœ¨æœ‰æ•ˆè·è½½ï¼ˆpayloadï¼‰çš„å‰é¢é™„åŠ å¤´ï¼ˆheadersï¼‰ã€‚å®ƒä¸ä¼šè¿›ä¸€æ­¥åŒºåˆ†å•ä¸ªï¼ˆå¤§å—ï¼‰èµ„æºä¸å…¶ä»–èµ„æºã€‚è¿™æ˜¯ HTTP/1.1 åè®®è®¾è®¡æ–¹å¼çš„ä¸€ä¸ªåŸºç¡€é™åˆ¶ã€‚å¦‚æœåªæœ‰ä¸€ä¸ª HTTP/1.1 è¿æ¥ï¼Œé‚£ä¹ˆåœ¨åˆ‡æ¢åˆ°å‘é€æ–°èµ„æºä¹‹å‰ï¼Œå¿…é¡»å®Œæ•´åœ°ä¼ è¾“èµ„æºå“åº”ã€‚å¦‚æœå‰é¢çš„èµ„æºåˆ›å»ºç¼“æ…¢ï¼Œå¯èƒ½ä¼šå¼•èµ·é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæµè§ˆå™¨å¼€å§‹ä¸º HTTP/1.1 ä¸Šçš„æ¯ä¸ªé¡µé¢æ‰“å¼€å¤šä¸ªTCPé“¾æ¥(é€šå¸¸æ˜¯6ä¸ª)ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å¤šåŸŸåé…ç½®åŒæ—¶æ‰“å¼€æ›´å¤šçš„TCPé“¾æ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸è¶…è¿‡6ä¸ªè¯·æ±‚å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå°±ä¸ä¼šå‡ºç°é˜Ÿå¤´é˜»å¡çš„æƒ…å†µã€‚å½“ç„¶ï¼Œå¤§é‡çš„TCPé“¾æ¥è‚¯å®šä¼šå¯¼è‡´æ›´å¤§çš„å¼€é”€ï¼Œå¦‚HTTPSçš„TLSæ¡æ‰‹==æ“ä½œã€‚
HTTP/2 çš„ç›®æ ‡éå¸¸æ˜ç¡®ï¼šèƒ½å¤Ÿå›åˆ°å•ä¸ª TCP è¿æ¥ï¼Œè§£å†³é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚æˆ–è€…è¯´ï¼šæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæ­£ç¡®åœ°å¤ç”¨èµ„æºå—ï¼ˆresource chunksï¼‰ã€‚è¿™åœ¨ HTTP/1.1 ä¸­æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæ²¡æœ‰åŠæ³•åˆ†è¾¨ä¸€ä¸ªå—å±äºå“ªä¸ªèµ„æºï¼Œæˆ–è€…å®ƒåœ¨å“ªé‡Œç»“æŸï¼Œå¦ä¸€ä¸ªå—ä»å“ªé‡Œå¼€å§‹ã€‚HTTP/2 éå¸¸ä¼˜é›…åœ°è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå®ƒåœ¨èµ„æºå—ä¹‹å‰æ·»åŠ äº†å¸§ï¼ˆframesï¼‰ã€‚
HTTP/2 åœ¨æ¯ä¸ªå—å‰é¢æ”¾ç½®ä¸€ä¸ªæ‰€è°“çš„æ•°æ®å¸§ï¼ˆDATA frameï¼‰ã€‚è¿™äº›æ•°æ®å¸§ä¸»è¦åŒ…å«ä¸¤ä¸ªå…³é”®çš„å…ƒæ•°æ®ã€‚é¦–å…ˆï¼šä¸‹é¢çš„å—å±äºå“ªä¸ªèµ„æºã€‚æ¯ä¸ªèµ„æºçš„â€œå­—èŠ‚æµï¼ˆbytestreamï¼‰â€éƒ½è¢«åˆ†é…äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ï¼Œå³æµidï¼ˆstream idï¼‰ã€‚ç¬¬äºŒï¼šå—çš„å¤§å°æ˜¯å¤šå°‘ã€‚å› æ­¤ï¼Œé€šè¿‡â€œframingâ€å•ä¸ªæ¶ˆæ¯ï¼ŒHTTP/2 æ¯” HTTP/1.1 æ›´åŠ çµæ´»ã€‚å®ƒå…è®¸åœ¨å•ä¸ª TCP è¿æ¥ä¸Šé€šè¿‡äº¤é”™æ’åˆ—å—æ¥å¤šè·¯ä¼ è¾“å¤šä¸ªèµ„æºã€‚å®ƒè¿˜è§£å†³äº†ç¬¬ä¸€ä¸ªèµ„æºç¼“æ…¢æ—¶çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ã€‚
èµ„æºåŠ æƒ
åœ¨å¤šè·¯å¤ç”¨çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶å•ä¸ªé“¾æ¥ä¸Šå¯¹ä¸åŒèµ„æºçš„å¸¦å®½åˆ†å¸ƒï¼Œå¦‚
å…¬å¹³å¤šè·¯å¤ç”¨ï¼ˆä¾‹å¦‚ä¸¤ä¸ªæ¸è¿›çš„ JPEGsï¼‰ï¼š12121212 åŠ æƒå¤šè·¯å¤ç”¨ï¼ˆ2æ˜¯1çš„ä¸¤å€ï¼‰ï¼š22122122121 åå‘é¡ºåºè°ƒåº¦ï¼ˆä¾‹å¦‚2æ˜¯å¯†é’¥æœåŠ¡å™¨æ¨é€çš„èµ„æºï¼‰ï¼š22221111 éƒ¨åˆ†è°ƒåº¦ï¼ˆæµ1è¢«ä¸­æ­¢ä¸”æœªå®Œæ•´å‘é€ï¼‰ï¼š112222 æœåŠ¡ç«¯æ¨é€ HTTP/2 å…è®¸æœåŠ¡ç«¯ä¸»åŠ¨å°†å†…å®¹æ¨é€ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·å¯ä»¥æå‰åŠ è½½ç½‘é¡µæ‰€éœ€çš„èµ„æºï¼Œä»è€Œæé«˜ç½‘é¡µåŠ è½½çš„é€Ÿåº¦ã€‚è¿™æ ·çš„æœåŠ¡ç«¯æ¨é€å¯ä»¥é¿å…å®¢æˆ·ç«¯éœ€è¦å†æ¬¡å‘é€è¯·æ±‚ä»¥è·å–æŸäº›èµ„æºï¼Œä»è€Œå‡å°‘ç½‘ç»œå»¶è¿Ÿã€‚
äºŒè¿›åˆ¶åˆ†å¸§ HTTP/2 ä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼Œå¹¶é€šè¿‡åˆ†å¸§ä¼ è¾“ã€‚è¿™æ ·å¯ä»¥é¿å…å­—ç¬¦ç¼–ç é—®é¢˜ï¼Œå¹¶æé«˜äº†æ•°æ®ä¼ è¾“çš„æ•ˆç‡ã€‚HTTP/2 ä¸­çš„å¸§æœ‰å¤šç§ç±»å‹ï¼Œæ¯ç§ç±»å‹çš„å¸§éƒ½æœ‰è‡ªå·±çš„ç‰¹å®šç”¨é€”ï¼Œä¾‹å¦‚ç”¨äºæ•°æ®ä¼ è¾“ã€æµé‡æ§åˆ¶å’Œé”™è¯¯å¤„ç†ç­‰ã€‚
æµé‡æ§åˆ¶ HTTP/2 å…è®¸å®ç°æµé‡æ§åˆ¶ï¼Œä»è€Œé¿å…ç½‘ç»œé˜»å¡ã€‚åœ¨ HTTP/1.1 ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯·æ±‚å ç”¨äº†å¤§é‡çš„å¸¦å®½ï¼Œå°±å¯èƒ½å¯¼è‡´å…¶ä»–è¯·æ±‚çš„å“åº”æ—¶é—´å˜é•¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚HTTP/2 çš„æµé‡æ§åˆ¶åŠŸèƒ½å…è®¸æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åå•†è¯·æ±‚å’Œå“åº”çš„é€Ÿç‡ï¼Œä»è€Œé¿å…é˜»å¡ã€‚
HTTP2.0çš„ä¸è¶³ é˜Ÿå¤´é˜»å¡é—®é¢˜ ä¸Šæ–‡æåˆ°äº†HTTP2.0å¢åŠ äº†å¤šè·¯å¤ç”¨æœºåˆ¶è§£å†³äº†é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œäº‹å®è¯æ˜ï¼ŒHTTP/2 åªè§£å†³äº† HTTP çº§åˆ«çš„é˜Ÿå¤´é˜»å¡ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºâ€œåº”ç”¨å±‚â€é˜Ÿå¤´é˜»å¡ã€‚ç„¶è€Œï¼Œåœ¨å…¸å‹çš„ç½‘ç»œæ¨¡å‹ä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸‹é¢çš„å…¶ä»–å±‚ã€‚ä¹Ÿå°±æ˜¯HTTP2.</description>
    </item>
    
    <item>
      <title>è½¬æ¢byteså’Œstringçš„æœ€ä½³å®è·µ</title>
      <link>https://www.yici.xin/post/tech/%E8%BD%AC%E6%8D%A2bytes%E5%92%8Cstring%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</link>
      <pubDate>Wed, 01 Feb 2023 19:34:04 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/%E8%BD%AC%E6%8D%A2bytes%E5%92%8Cstring%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</guid>
      <description>æœ¬æ–‡golangæºç ä¸º1.18ç‰ˆæœ¬
æ ‡å‡†è½¬æ¢ ä½¿ç”¨æ ‡å‡†è½¬æ¢æ˜¯æœ€å¸¸è§çš„é€‰æ‹©
package main func main() { s := &amp;#34;Hello, world!&amp;#34; // stringè½¬byteæ•°ç»„ b := []byte(s) // byteæ•°ç»„è½¬string s2 := string(b) } è¯¥è½¬æ¢è¯­å¥ä¼šè¢«goç¼–è¯‘å™¨ç¿»è¯‘ä¸ºruntimeå±‚çš„æ–¹æ³•è°ƒç”¨ï¼Œå…¶ä¸­[]byteåˆ°stringçš„è½¬æ¢å¯¹åº”/src/runtime/string.go:81å¤„çš„slicebytetostringå‡½æ•°ï¼›è€Œstringåˆ°[]byteçš„è½¬æ¢å¯¹åº”çš„åˆ™æ˜¯/src/runtime/string.go:172å¤„çš„stringtoslicebyteå‡½æ•°ã€‚
å…ˆæ¥çœ‹çœ‹æ¯”è¾ƒç®€å•çš„stringtoslicebyteå‡½æ•°ï¼ŒtmpBufç±»å‹æ˜¯ä¸ªå¤§å°ä¸º32çš„byteæ•°ç»„ã€‚
// The constant is known to the compiler. // There is no fundamental theory behind this number. ğŸ¤£ const tmpStringBufSize = 32 type tmpBuf [tmpStringBufSize]byte func stringtoslicebyte(buf *tmpBuf, s string) []byte { var b []byte if buf != nil &amp;amp;&amp;amp; len(s) &amp;lt;= len(buf) { *buf = tmpBuf{} b = buf[:len(s)] } else { // å¦‚æœæ²¡æœ‰ç¼“å†²åŒºæˆ–ç¼“å†²åŒºå¤§å°ä¸è¶³ï¼Œéœ€è¦ç”³è¯·å†…å­˜ b = rawbyteslice(len(s)) } // å¤åˆ¶æ•°æ® copy(b, s) return b } func rawbyteslice(size int) (b []byte) { // å®¹é‡è®¡ç®—ï¼Œè€ƒè™‘å†…å­˜å¯¹é½ï¼Œå¯»æ‰¾å¤§å°æœ€åŒ¹é…çš„å†…å­˜å— cap := roundupsize(uintptr(size)) // ä½¿ç”¨mallocgcç”³è¯·å¯¹åº”å¤§å°çš„å†…å­˜ p := mallocgc(cap, nil, false) // å¦‚æœè¦ç”³è¯·çš„sizeå’Œæœ€ç»ˆè®¡ç®—å¾—åˆ°çš„capå¤§å°ä¸ä¸€è‡´ï¼Œcapåªä¼šæ¯”sizeæ›´å¤§ï¼Œæ¸…ç†æ‰å¤šä½™çš„å†…å­˜ if cap !</description>
    </item>
    
    <item>
      <title>Rustâ€”â€”æ³›å‹å’Œtrait</title>
      <link>https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/</link>
      <pubDate>Wed, 18 Jan 2023 14:16:44 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/</guid>
      <description>æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:
fn largest_i32(list: &amp;amp;[i32]) -&amp;gt; &amp;amp;i32 { let mut largest = &amp;amp;list[0]; for item in list.iter() { if item &amp;gt; largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:
fn largest_char(list: &amp;amp;[char]) -&amp;gt; &amp;amp;char { let mut largest = &amp;amp;list[0]; for item in list.iter() { if item &amp;gt; largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚
æ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:
fn largest_t&amp;lt;T&amp;gt;(list: &amp;amp;[T]) -&amp;gt; &amp;amp;T { let mut largest = &amp;amp;list[0]; for item in list.</description>
    </item>
    
    <item>
      <title>Rusté”™è¯¯å¤„ç†</title>
      <link>https://www.yici.xin/post/tech/rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</link>
      <pubDate>Mon, 16 Jan 2023 10:02:41 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/</guid>
      <description>rustä¸­çš„é”™è¯¯åˆ†ä¸ºå¯æ¢å¤é”™è¯¯ï¼ˆrecoverableï¼‰å’ŒÂ ä¸å¯æ¢å¤é”™è¯¯ï¼ˆunrecoverableï¼‰ã€‚å¯æ¢å¤é”™è¯¯ä½¿ç”¨Result&amp;lt;T,E&amp;gt;æšä¸¾ï¼Œä¸å¯æ¢å¤é”™è¯¯ä½¿ç”¨panicï¼å®ã€‚
ä¸å¯æ¢å¤é”™è¯¯â€”â€”panic!å® å½“å‡ºç° panic æ—¶ï¼Œç¨‹åºé»˜è®¤ä¼šå¼€å§‹Â å±•å¼€ï¼ˆunwindingï¼‰ï¼Œè¿™æ„å‘³ç€ Rust ä¼šå›æº¯æ ˆå¹¶æ¸…ç†å®ƒé‡åˆ°çš„æ¯ä¸€ä¸ªå‡½æ•°çš„æ•°æ®ï¼Œä¸è¿‡è¿™ä¸ªå›æº¯å¹¶æ¸…ç†çš„è¿‡ç¨‹æœ‰å¾ˆå¤šå·¥ä½œã€‚å¦ä¸€ç§é€‰æ‹©æ˜¯ç›´æ¥Â ç»ˆæ­¢ï¼ˆabortï¼‰ï¼Œè¿™ä¼šä¸æ¸…ç†æ•°æ®å°±é€€å‡ºç¨‹åºã€‚é‚£ä¹ˆç¨‹åºæ‰€ä½¿ç”¨çš„å†…å­˜éœ€è¦ç”±æ“ä½œç³»ç»Ÿæ¥æ¸…ç†ã€‚å¦‚æœä½ éœ€è¦é¡¹ç›®çš„æœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶è¶Šå°è¶Šå¥½ï¼Œpanic æ—¶é€šè¿‡åœ¨Â Cargo.tomlÂ çš„Â [profile]Â éƒ¨åˆ†å¢åŠ Â panic = &#39;abort&#39;ï¼Œå¯ä»¥ç”±å±•å¼€åˆ‡æ¢ä¸ºç»ˆæ­¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³è¦åœ¨releaseæ¨¡å¼ä¸­ panic æ—¶ç›´æ¥ç»ˆæ­¢ï¼š
[profile.release] panic = &amp;#39;abort&amp;#39; panic!å®çš„ä½¿ç”¨ fn main() { panic!(&amp;#34;crash and burn&amp;#34;); } è¯¥ä»£ç çš„è¾“å‡ºæ˜¯è¿™æ ·çš„: æˆ‘ä»¬ä»…èƒ½çœ‹åˆ°panic!æ—¶æä¾›çš„å†…å®¹&amp;quot;crash and burn&amp;quot;ï¼Œå’Œpanic!çš„è°ƒç”¨ä½ç½®ï¼Œè¦æƒ³çœ‹åˆ°panic!å®çš„å®Œæ•´è°ƒç”¨æ ˆï¼Œå¯ä»¥ä½¿ç”¨RUST_BACKTRACE=1 cargo runå‘½ä»¤æ¥æ‰§è¡Œç¨‹åºã€‚ å®é™…çš„è¾“å‡ºå¯èƒ½å› ä¸åŒçš„æ“ä½œç³»ç»Ÿå’Œ Rust ç‰ˆæœ¬è€Œæœ‰æ‰€ä¸åŒ å¯æ¢å¤é”™è¯¯â€”â€”Result&amp;lt;T,E&amp;gt;æšä¸¾ enum Result&amp;lt;T, E&amp;gt; { Ok(T), Err(E), } TÂ å’ŒÂ EÂ æ˜¯æ³›å‹ç±»å‹å‚æ•°ã€‚é€šå¸¸å¤„ç†å¯æ¢å¤é”™è¯¯æ—¶ï¼Œå‡½æ•°å°†ä¼šè¿”å›ä¸€ä¸ªResultï¼Œè°ƒç”¨è€…å¯ä½¿ç”¨matchè¿›è¡ŒåŒ¹é…ã€‚
use std::fs::File; fn main() { let f = File::open(&amp;#34;hello.txt&amp;#34;); let f = match f { Ok(file) =&amp;gt; file, // å¦‚æœæˆåŠŸ,è¿”å›å€¼çš„fileèµ‹å€¼ç»™f Err(error) =&amp;gt; { panic!</description>
    </item>
    
    <item>
      <title>Golangâ€”â€”plan9æ±‡ç¼–</title>
      <link>https://www.yici.xin/post/tech/golangplan9%E6%B1%87%E7%BC%96/</link>
      <pubDate>Fri, 30 Dec 2022 10:51:52 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golangplan9%E6%B1%87%E7%BC%96/</guid>
      <description>åŸºæœ¬æŒ‡ä»¤ æ ˆç›¸å…³ åœ¨ plan9 æ±‡ç¼–ä¸­ï¼Œè™½ç„¶å­˜åœ¨pushã€popæŒ‡ä»¤ï¼Œä½†æ˜¯åœ¨ç”Ÿæˆçš„ä»£ç ä¸­ä¸€èˆ¬æ˜¯çœ‹ä¸åˆ°çš„ï¼Œé€šå¸¸æ ˆçš„è¿™ä¸¤ç§æ“ä½œä¼šä»¥æ“ä½œSPå¯„å­˜å™¨çš„ä½ç½®æ¥æ›¿æ¢ã€‚
SUBQ $0x18, SP // å¯¹ SP åšå‡æ³•ï¼Œä¸ºå‡½æ•°åˆ†é…å‡½æ•°æ ˆå¸§ ... // çœç•¥æ— ç”¨ä»£ç  ADDQ $0x18, SP // å¯¹ SP åšåŠ æ³•ï¼Œæ¸…é™¤å‡½æ•°æ ˆå¸§ æ ˆçš„æ–¹å‘æ˜¯ä»å†…å­˜é«˜ä½ç½®å‘ä½ä½ç½®çš„ï¼Œæ‰€ä»¥å¯¹ SP å¯„å­˜å™¨åšå‡æ³•ï¼Œå°±æ˜¯ç»™æ ˆåˆ†é…å†…å­˜ï¼ŒåŠ æ³•å³å›æ”¶å†…å­˜ã€‚
x86 æ±‡ç¼–ä¸­ push å’Œ pop æŒ‡ä»¤å¯ä»¥æ¥ä¸€ä¸ªå¯„å­˜å™¨ï¼Œå¦‚ pop axï¼Œè¡¨ç¤ºå°†æ ˆé¡¶å…ƒç´ æ”¾å…¥ ax å¯„å­˜å™¨å¹¶ä¸”æ ˆé¡¶å¯„å­˜å™¨è‡ªåŠ¨å›é€€ï¼Œè€Œ plan9 åªæ˜¯åšäº†æ ˆé¡¶å¯„å­˜å™¨æ“ä½œï¼Œå¯¹äºèµ‹å€¼æ“ä½œéœ€è¦ä½¿ç”¨ mov æŒ‡ä»¤ ğŸ˜­
æ•°æ®æ¬è¿ plan9 æ±‡ç¼–ä¸­ï¼Œå¸¸æ•°ä»¥$numå½¢å¼è¡¨ç¤ºï¼Œå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œä¸€èˆ¬ä¸º 10 è¿›åˆ¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨$0x123çš„åå…­è¿›åˆ¶å½¢å¼ã€‚
MOVB $1, DI // 1 byte MOVW $0x10, BX // 2 bytes MOVD $1, DX // 4 bytes MOVQ $-10, AX // 8 bytes plan9 æ±‡ç¼–ä¸­ä½¿ç”¨çš„é€šå¸¸æ˜¯å¸¦æœ‰åç¼€çš„ MOV æŒ‡ä»¤ï¼Œä¸åŒåç¼€çš„åŒºåˆ«æ˜¯ç§»åŠ¨çš„å­—èŠ‚å¤§å°ã€‚è¿™å’Œ x86 çš„æ±‡ç¼–ä¸ä¸€æ ·ï¼Œåœ¨ x86 æ±‡ç¼–ä¸­ï¼Œå†³å®šç§»åŠ¨å­—èŠ‚å¤§å°çš„æ˜¯å¯„å­˜å™¨ã€‚</description>
    </item>
    
    <item>
      <title>Golang-mapçš„æ“ä½œ</title>
      <link>https://www.yici.xin/post/tech/golang-map%E7%9A%84%E6%93%8D%E4%BD%9C/</link>
      <pubDate>Fri, 30 Dec 2022 10:49:41 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golang-map%E7%9A%84%E6%93%8D%E4%BD%9C/</guid>
      <description>åˆ›å»º map åˆ›å»º map çš„è¯­æ³•å¾ˆç®€å•
// ä¸æŒ‡å®šmapé•¿åº¦ ageMp := make(map[string]int) // æŒ‡å®šmapé•¿åº¦ ageMp := make(map[string]int, 8) // ageMp ä¸º nilï¼Œä¸èƒ½å‘å…¶æ·»åŠ å…ƒç´ ï¼Œä¼šç›´æ¥panic var ageMp map[string]int é€šè¿‡æ±‡ç¼–è¯­è¨€ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè·Ÿè¸ªåˆ° map çš„åˆ›å»ºæœ€ç»ˆä¼šè°ƒç”¨ runtime.makemap æ–¹æ³•
// makemap implements Go map creation for make(map[k]v, hint). // If the compiler has determined that the map or the first bucket // can be created on the stack, h and/or bucket may be non-nil. // If h != nil, the map can be created directly in h.</description>
    </item>
    
    <item>
      <title>Goç¨‹åºçš„å¯åŠ¨è¿‡ç¨‹</title>
      <link>https://www.yici.xin/post/tech/go%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/</link>
      <pubDate>Tue, 27 Dec 2022 18:35:19 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/go%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B/</guid>
      <description>æˆ‘ä»¬çŸ¥é“goçš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯æ”¯æŒå¤šä¸ªå¹³å°ï¼Œè¿™ä¸€ç‰¹æ€§çš„èƒŒåæ˜¯å¯¹å„ç§ä¸åŒå¹³å°ç¡¬ä»¶æŒ‡ä»¤çš„å…¼å®¹ï¼Œåœ¨goç¨‹åºå¯åŠ¨æµç¨‹çš„ç¬¬ä¸€æ­¥ï¼Œå°±éœ€è¦åŒºåˆ†ä¸åŒçš„ç¡¬ä»¶å¹³å°ã€‚
æˆ‘ç›®å‰ä½¿ç”¨çš„ç”µè„‘æ˜¯è‹¹æœçš„m1èŠ¯ç‰‡mbpï¼Œè¯¥èŠ¯ç‰‡ä½¿ç”¨çš„æ˜¯armæ¶æ„ï¼Œæ“ä½œç³»ç»Ÿåº•å±‚æ˜¯darwinï¼Œå¯¹åº”çš„å¯åŠ¨æ±‡ç¼–æ–‡ä»¶æ˜¯ï¼šruntime/rt0_darwin_arm64.sã€‚
ä½œä¸ªå¯¹æ¯”ï¼Œæˆ‘è¿™é‡Œä¹Ÿæ”¾ä¸Šamd64çš„å¯åŠ¨æ±‡ç¼–ã€‚
å¯ä»¥çœ‹åˆ°å®ƒä»¬æœ€ç»ˆéƒ½è°ƒç”¨äº†runtimeçš„rt0_goæ–¹æ³•ï¼Œarmæ¶æ„åœ¨runtime/asm_arm64.sï¼Œamdåœ¨runtime/asm_amd64.sï¼Œrt0_goä¸åŒå¹³å°å®ç°ä¸å®Œå…¨ä¸€è‡´ï¼Œä½†å¤§åŒå°å¼‚ï¼Œæˆ‘ä»¬æŒ‘å‡ºå…¶ä¸­æœ‰ä»·å€¼çš„éƒ¨åˆ†ï¼š
runtimeÂ·check è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ï¼Œä¸»è¦æ˜¯æ ¡éªŒç¼–è¯‘å™¨çš„ç¿»è¯‘å·¥ä½œæ˜¯å¦æ­£ç¡®ã€‚ runtimeÂ·args ç³»ç»Ÿå‚æ•°ä¼ é€’ï¼Œä¸»è¦æ˜¯å°†ç³»ç»Ÿå‚æ•°è½¬æ¢ä¼ é€’ç»™ç¨‹åºä½¿ç”¨ã€‚ runtimeÂ·osinit ç³»ç»ŸåŸºæœ¬å‚æ•°è®¾ç½®ï¼Œä¸»è¦æ˜¯è·å– CPU æ ¸å¿ƒæ•°å’Œå†…å­˜ç‰©ç†é¡µå¤§å°ã€‚ runtimeÂ·schedinit è¿›è¡Œå„ç§è¿è¡Œæ—¶ç»„ä»¶çš„åˆå§‹åŒ–ï¼ŒåŒ…å«è°ƒåº¦å™¨ã€å†…å­˜åˆ†é…å™¨ã€å †ã€æ ˆã€GC ç­‰ä¸€å¤§å †åˆå§‹åŒ–å·¥ä½œã€‚ä¼šè¿›è¡Œ p çš„åˆå§‹åŒ–ï¼Œå¹¶å°† m0 å’ŒæŸä¸€ä¸ª p è¿›è¡Œç»‘å®šã€‚ runtimeÂ·mainPC ä¸»è¦å·¥ä½œæ˜¯è¿è¡Œ main goroutineï¼Œè™½ç„¶åœ¨runtimeÂ·rt0_goä¸­æŒ‡å‘çš„æ˜¯$runtimeÂ·mainPCï¼Œä½†å®è´¨æŒ‡å‘çš„æ˜¯Â runtime.main runtimeÂ·newproc åˆ›å»ºä¸€ä¸ªæ–°çš„ goroutineï¼Œä¸”ç»‘å®šÂ runtime.mainæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯åº”ç”¨ç¨‹åºä¸­çš„å…¥å£ main æ–¹æ³•ï¼‰ã€‚å¹¶å°†å…¶æ”¾å…¥ m0 ç»‘å®šçš„pçš„æœ¬åœ°é˜Ÿåˆ—ä¸­å»ï¼Œä»¥ä¾¿åç»­è°ƒåº¦ã€‚ runtimeÂ·mstart å¯åŠ¨ mï¼Œè°ƒåº¦å™¨å¼€å§‹è¿›è¡Œå¾ªç¯è°ƒåº¦ã€‚ </description>
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨Keynoteä¸­è´´å‡ºå¥½çœ‹çš„ä»£ç </title>
      <link>https://www.yici.xin/post/tech/keynote%E4%B8%AD%E8%B4%B4%E4%BB%A3%E7%A0%81/</link>
      <pubDate>Tue, 27 Dec 2022 18:30:01 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/keynote%E4%B8%AD%E8%B4%B4%E4%BB%A3%E7%A0%81/</guid>
      <description>brew install highlight éœ€è¦å®‰è£…highlightå·¥å…·ã€‚
ç”¨æ³•:
è½¬åŒ–å‰ªè´´æ¿ä¸­çš„ä»£ç ï¼š
pbpaste | highlight --syntax=go --style=github -k &amp;#34;Fira Code&amp;#34; -K 36 -u &amp;#34;utf-8&amp;#34; -t 4 -O rtf | pbcopy --syntaxæŒ‡å®šä»£ç è¯­æ³•æ ¼å¼ï¼Œ-uæŒ‡å®šç¼–ç ï¼Œå¦åˆ™ä¸­æ–‡ä¼šä¹±ç ï¼Œ--styleæŒ‡å®šé«˜äº®çš„æ ·å¼ï¼Œ-KæŒ‡å®šä»£ç çš„å­—å¤§å°ï¼Œrtfæ˜¯è¦è½¬å‡ºçš„æ ¼å¼ï¼Œè¿˜å¯ä»¥æ˜¯å…¶ä»–çš„å¦‚htmlã€‚
è½¬åŒ–ä»£ç æ–‡ä»¶ï¼š
highlight --style=github -k &amp;#34;Fira Code&amp;#34; -K 36 -u &amp;#34;utf-8&amp;#34; -t 4 -O rtf hello.go | pbcopy </description>
    </item>
    
    <item>
      <title>Golangè¯»å†™é”</title>
      <link>https://www.yici.xin/post/tech/golang%E8%AF%BB%E5%86%99%E9%94%81/</link>
      <pubDate>Tue, 27 Dec 2022 18:26:23 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golang%E8%AF%BB%E5%86%99%E9%94%81/</guid>
      <description>ä¹‹å‰å†™è¿‡å…³äºäº’æ–¥é”çš„å†…å®¹ï¼Œ Golangäº’æ–¥é”-Mutex æ—¥æœŸ: 2022-12-27 &amp;nbsp; æ ‡ç­¾: #golang&amp;nbsp; #é”&amp;nbsp; #æºç è§£æ&amp;nbsp; äº’æ–¥é”ç»“æ„ // A Mutex is a mutual exclusion lock. // The zero value for a Mutex is an unlocked mutex. // // A Mutex must not be copied after first use. type Mutex struct { state int32 sema uint32 } stateè¡¨ç¤ºå½“å‰äº’æ–¥é”çš„çŠ¶æ€ï¼ŒÂ semaæ˜¯ç”¨äºæ§åˆ¶é”çŠ¶æ€çš„ä¿¡å·é‡ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œäº’æ–¥é”çš„æ‰€æœ‰çŠ¶æ€ä½éƒ½æ˜¯ 0ï¼Œint32Â ä¸­çš„ä¸åŒä½åˆ†åˆ«è¡¨ç¤ºäº†ä¸åŒçš„çŠ¶æ€ï¼š mutexLockedÂ â€” è¡¨ç¤ºäº’æ–¥é”çš„é”å®šçŠ¶æ€ï¼› mutexWokenÂ â€” å”¤é†’æ¨¡å¼ï¼Œæ­¤æ—¶é‡Šæ”¾é”çš„gä¸ä¼šå”¤é†’ä¼‘çœ çš„gï¼› mutexStarvingÂ â€” å½“å‰çš„äº’æ–¥é”è¿›å…¥é¥¥é¥¿çŠ¶æ€ï¼› waitersCountÂ â€” å½“å‰äº’æ–¥é”ä¸Šç­‰å¾…çš„ Goroutine ä¸ªæ•°ï¼› æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼çš„åŒºåˆ«: åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œé”çš„ç­‰å¾…è€…ä¼šæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºè·å–é”ã€‚ä½†æ˜¯åˆšè¢«å”¤èµ·çš„ Goroutine ä¸æ–°åˆ›å»ºçš„ Goroutine ç«äº‰æ—¶ï¼Œå¤§æ¦‚ç‡ä¼šè·å–ä¸åˆ°é”ï¼Œä¸ºäº†å‡å°‘è¿™ç§æƒ…å†µçš„å‡ºç°ï¼Œä¸€æ—¦ Goroutine è¶…è¿‡ 1ms æ²¡æœ‰è·å–åˆ°é”ï¼Œå®ƒå°±ä¼šå°†å½“å‰äº’æ–¥é”åˆ‡æ¢é¥¥é¥¿æ¨¡å¼ï¼Œé˜²æ­¢éƒ¨åˆ† Goroutine è¢«ã€é¥¿æ­»ã€ã€‚ .</description>
    </item>
    
    <item>
      <title>Golangå†…å­˜å›æ”¶</title>
      <link>https://www.yici.xin/post/tech/golang%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/</link>
      <pubDate>Tue, 27 Dec 2022 18:26:23 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golang%E5%86%85%E5%AD%98%E5%9B%9E%E6%94%B6/</guid>
      <description>GCæºç åˆ†å¸ƒ: æµç¨‹ æ–‡ä»¶ æ ‡è®°å‡†å¤‡ runtime/mgc.go è°ƒæ­¥ç­–ç•¥ runtime/mgcpacer.go å¹¶å‘æ ‡è®° runtime/mgcmark.go æ¸…æ‰«æµç¨‹ runtime/msweep.go ä½å›¾æ ‡è¯† runtime/mbitmap.go è§¦å‘å±éšœ runtime/mbwbuf.go å†…å­˜å›æ”¶ runtime/mgcscavenge.go GCè§¦å‘é“¾è·¯: è§¦å‘ GC çš„äº‹ä»¶ç±»å‹å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸‰ç§ï¼š
ç±»å‹ è§¦å‘äº‹ä»¶ æ ¡éªŒæ¡ä»¶ gcTriggerHeap åˆ†é…å¯¹è±¡æ—¶è§¦å‘ å †å·²åˆ†é…å†…å­˜è¾¾åˆ°é˜ˆå€¼ gcTriggerTime ç”± forcegchelper å®ˆæŠ¤åç¨‹å®šæ—¶è§¦å‘ æ¯2åˆ†é’Ÿè§¦å‘ä¸€æ¬¡ gcTriggerCycle ç”¨æˆ·è°ƒç”¨ runtime.GC æ–¹æ³• ä¸Šä¸€è½® GC å·²ç»“æŸ è§¦å‘ç±»å‹çš„æºç :
type gcTriggerKind int const ( // å †è§¦å‘ gcTriggerHeap gcTriggerKind = iota // å®šæ—¶è§¦å‘ gcTriggerTime // æ‰‹åŠ¨è§¦å‘ gcTriggerCycle ) // è¿›è¡Œè§¦å‘æ¡ä»¶çš„æ ¡éªŒ func (t gcTrigger) test() bool { if !memstats.enablegc || panicking.Load() !</description>
    </item>
    
    <item>
      <title>Golangäº’æ–¥é”-Mutex</title>
      <link>https://www.yici.xin/post/tech/golang%E4%BA%92%E6%96%A5%E9%94%81/</link>
      <pubDate>Tue, 27 Dec 2022 18:22:59 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golang%E4%BA%92%E6%96%A5%E9%94%81/</guid>
      <description>äº’æ–¥é”ç»“æ„ // A Mutex is a mutual exclusion lock. // The zero value for a Mutex is an unlocked mutex. // // A Mutex must not be copied after first use. type Mutex struct { state int32 sema uint32 } stateè¡¨ç¤ºå½“å‰äº’æ–¥é”çš„çŠ¶æ€ï¼ŒÂ semaæ˜¯ç”¨äºæ§åˆ¶é”çŠ¶æ€çš„ä¿¡å·é‡
åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œäº’æ–¥é”çš„æ‰€æœ‰çŠ¶æ€ä½éƒ½æ˜¯ 0ï¼Œint32Â ä¸­çš„ä¸åŒä½åˆ†åˆ«è¡¨ç¤ºäº†ä¸åŒçš„çŠ¶æ€ï¼š
mutexLockedÂ â€” è¡¨ç¤ºäº’æ–¥é”çš„é”å®šçŠ¶æ€ï¼›
mutexWokenÂ â€” å”¤é†’æ¨¡å¼ï¼Œæ­¤æ—¶é‡Šæ”¾é”çš„gä¸ä¼šå”¤é†’ä¼‘çœ çš„gï¼›
mutexStarvingÂ â€” å½“å‰çš„äº’æ–¥é”è¿›å…¥é¥¥é¥¿çŠ¶æ€ï¼›
waitersCountÂ â€” å½“å‰äº’æ–¥é”ä¸Šç­‰å¾…çš„ Goroutine ä¸ªæ•°ï¼›
æ­£å¸¸æ¨¡å¼å’Œé¥¥é¥¿æ¨¡å¼çš„åŒºåˆ«:
åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œé”çš„ç­‰å¾…è€…ä¼šæŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºè·å–é”ã€‚ä½†æ˜¯åˆšè¢«å”¤èµ·çš„ Goroutine ä¸æ–°åˆ›å»ºçš„ Goroutine ç«äº‰æ—¶ï¼Œå¤§æ¦‚ç‡ä¼šè·å–ä¸åˆ°é”ï¼Œä¸ºäº†å‡å°‘è¿™ç§æƒ…å†µçš„å‡ºç°ï¼Œä¸€æ—¦ Goroutine è¶…è¿‡ 1ms æ²¡æœ‰è·å–åˆ°é”ï¼Œå®ƒå°±ä¼šå°†å½“å‰äº’æ–¥é”åˆ‡æ¢é¥¥é¥¿æ¨¡å¼ï¼Œé˜²æ­¢éƒ¨åˆ† Goroutine è¢«ã€é¥¿æ­»ã€ã€‚</description>
    </item>
    
    <item>
      <title>pprofä½¿ç”¨</title>
      <link>https://www.yici.xin/post/tech/pprof%E4%BD%BF%E7%94%A8/</link>
      <pubDate>Tue, 27 Dec 2022 18:18:12 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/pprof%E4%BD%BF%E7%94%A8/</guid>
      <description>é¡¹ç›®åœ°å€:
https://github.com/google/pprof
å®‰è£…:
go install github.com/google/pprof@latest ä»€ä¹ˆæ˜¯profile? A Profile is a collection of stack traces showing the call sequences that led to instances of a particular event, such as allocation. Packages can create and maintain their own profiles; the most common use is for tracking resources that must be explicitly closed, such as files or network connections.
Each Profile has a unique name. A few profiles are predefined:
goroutine - stack traces of all current goroutines heap - a sampling of all heap allocations threadcreate - stack traces that led to the creation of new OS threads block - stack traces that led to blocking on synchronization primitives mutex - stack traces of holders of contended mutexes There are 7 places you can get profiles in the default webserver: the ones mentioned above</description>
    </item>
    
    <item>
      <title>Wire ä¾èµ–æ³¨å…¥</title>
      <link>https://www.yici.xin/post/tech/wire-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</link>
      <pubDate>Tue, 27 Dec 2022 18:09:30 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/wire-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/</guid>
      <description>ç”¨æ³• ä¸€èˆ¬ä¼šåœ¨ä¸€ä¸ªåä¸ºwire.goçš„æ–‡ä»¶é‡Œæä¾›éœ€è¦è‡ªåŠ¨æ³¨å…¥çš„å‡½æ•°ï¼Œåœ¨å¼€å¤´æ·»åŠ å¥½tagï¼Œåœ¨å‡½æ•°ä¸­ä½¿ç”¨wire.Buildæ–¹æ³•ï¼Œå¹¶æä¾›åˆ›å»ºä¾èµ–çš„æ–¹æ³•ï¼Œå¤šä¸ªä¾èµ–å¯ä»¥ç»„è£…ä¸ºä¸€ä¸ªSetã€‚
ç¤ºä¾‹ // +build wireinject // tagä¸èƒ½å¿˜ var ormSet = wire.NewSet(mysql.Newengine) var DataSourceSet = wire.NewSet(ormSet, japi.GetClient, cache.NewRedisCache) func InitAuthorRepo() AuthorRepoInterface { wire.Build( NewAuthorRepo, // å¯ä»¥ç”¨è¿™ç§æ–¹å¼æ›¿ä»£Newå‡½æ•°ï¼Œç‰¹åˆ«æ˜¯Newçš„å‚æ•°æ¯”è¾ƒå¤šæ—¶ï¼Œ*è¡¨ç¤ºå¯¹ç»“æ„ä½“çš„å…¨éƒ¨å­—æ®µè¿›è¡Œç”Ÿæˆ // wire.Struct(new(authorRepo), &amp;#34;*&amp;#34;), // å¦‚æœNewAuthorRepoçš„è¿”å›å€¼ä¸æ˜¯æ˜¾ç¤ºå£°æ˜AuthorRepoInterfaceï¼Œwireä¼šæç¤ºæ— AuthorRepoInterfaceçš„provider // æ­¤æ—¶å°±éœ€è¦ä¸‹é¢çš„è¯­å¥è¿›è¡Œç»‘å®š // wire.Bind(new(AuthorRepoInterface), new(*authorRepo)), repo.DataSourceSet, ) return nil } ç‰¹æ€§ wire.Struct type App struct { Foo *Foo Bar *Bar NoInject int `wire:&amp;#34;-&amp;#34;` } è¯¥æ–¹æ³•å¯ä»¥ä»£æ›¿Newå‡½æ•°ï¼Œç‰¹åˆ«æ˜¯Newå‡½æ•°å‚æ•°è¾ƒå¤šï¼Œä¸å¤ªå¥½å†™çš„æ—¶å€™ã€‚
wire.Struct(new(App),&amp;quot;Foo&amp;quot;,&amp;quot;Bar&amp;quot;)ç”ŸæˆæŒ‡å®šçš„å­—æ®µã€‚
wire.Struct(new(App), &amp;quot;*&amp;quot;)è¡¨ç¤ºç»“æ„ä½“çš„å…¨éƒ¨å­—æ®µéƒ½è‡ªåŠ¨ç”Ÿæˆã€‚
è‹¥æ˜¯æœ‰æŸäº›å­—æ®µä¸æƒ³åœ¨*æ—¶ç”Ÿæˆï¼Œå¯ä»¥ç»™å®ƒæ·»åŠ tagã€‚
wire.Bind wire.Bind(new(AuthorRepoInterface), new(*authorRepo)) wire.Bindå¯ä»¥æŒ‡å®šç»“æ„ä½“å®ç°çš„æ¥å£ï¼Œå¦‚æœç»“æ„ä½“çš„Newå‡½æ•°è¿”å›å€¼ä¸æ˜¯æ˜¾ç¤ºå£°æ˜ä¸ºå…¶å®ç°çš„æ¥å£ï¼Œé‚£ä¹ˆwireä¼šæŠ¥é”™ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨Bindæ–¹æ³•è¿›è¡Œç»‘å®šã€‚
wire.Value // provider.go type Foo struct { X int }// wire.</description>
    </item>
    
    <item>
      <title>Protobufè¯­æ³•</title>
      <link>https://www.yici.xin/post/tech/protobuf%E8%AF%AD%E6%B3%95/</link>
      <pubDate>Tue, 27 Dec 2022 18:02:40 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/protobuf%E8%AF%AD%E6%B3%95/</guid>
      <description>ä»€ä¹ˆæ˜¯protobufï¼Ÿ ä¸€ç§åºåˆ—åŒ–ç»“æ„æ•°æ®çš„æ–¹å¼ï¼Œä¸è¯­è¨€æ— å…³ï¼Œä¸å¹³å°æ— å…³ï¼Œå¯æ‰©å±•ã€‚å’Œjsonä¸€æ ·ï¼Œä½†æ˜¯æ›´å°æ›´å¿«ã€‚
V3è¯­æ³•ä»‹ç» ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢çš„è¯·æ±‚å‚æ•°ï¼Œæ–°å»ºä¸€ä¸ª.protoæ–‡ä»¶å¹¶å†™å…¥:
syntax = &amp;#34;proto3&amp;#34;; message SearchRequest { string query = 1; int32 page_num = 2; int32 page_size = 3; } .protoæ–‡ä»¶çš„ç¬¬ä¸€è¡ŒæŒ‡å®šäº†å½“å‰æ­£åœ¨ä½¿ç”¨proto3è¯­æ³•ï¼Œå¦‚æœæœªå†™ï¼Œprotoçš„ç¼–è¯‘å™¨ä¼šé»˜è®¤ä½¿ç”¨proto2çš„è¯­æ³•è¿›è¡Œè§£æã€‚
SearchRequestå®šä¹‰äº†ä¸‰ä¸ªå­—æ®µï¼Œå®ƒä»¬éƒ½æœ‰ç±»å‹å’Œåç§°ï¼Œå¹¶ä¸”åœ¨æœ€åç»™äº†ä¸€ä¸ªå”¯ä¸€ç¼–å·ï¼Œç¼–å·çš„ä½œç”¨æ˜¯åœ¨åºåˆ—åŒ–åçš„äºŒè¿›åˆ¶åºåˆ—ä¸­æ ‡è¯†å­—æ®µã€‚å½“ç¼–å·ä¸º1-15çš„èŒƒå›´å†…æ—¶ï¼Œåœ¨ç¼–ç æ—¶åªéœ€è¦ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œ16-2047å°±éœ€è¦ä¸¤ä¸ªå­—èŠ‚ï¼Œå…·ä½“åŸå› å¯ä»¥äº†è§£ä¸€ä¸‹protobufçš„ç¼–ç åŸç†ã€‚æ‰€ä»¥ï¼Œ1-15çš„ç¼–å·æœ€å¥½è¦ä¿ç•™ç»™é‚£äº›æœ€ç»å¸¸å‡ºç°çš„å­—æ®µã€‚ä½ èƒ½ä½¿ç”¨çš„æœ€å°ç¼–å·æ˜¯1ï¼Œæœ€å¤§æ˜¯$2^{29}$-1ï¼Œä¸è¿‡ä½ ä¸èƒ½ä½¿ç”¨19000-19999ï¼Œè¿™äº›ç¼–å·ä¸ºprotobufçš„å®ç°è€Œé¢„ä¿ç•™äº†ï¼Œå¦‚æœä½ ä½¿ç”¨äº†ï¼Œæ˜¯è¿‡ä¸äº†ç¼–è¯‘çš„ã€‚
åœ¨å•ä¸ª.protoæ–‡ä»¶ä¸­èƒ½å®šä¹‰å¤šä¸ªmessageç±»å‹:
syntax = &amp;#34;proto3&amp;#34;; message SearchRequest { string query = 1; int32 page_num = 2; int32 page_size = 3; } message SearchResponse { repeated string data = 1; int32 total = 2; } repeatedè¡¨ç¤ºè¯¥å­—æ®µæ˜¯ä¸€ä¸ªå¯é‡å¤å€¼ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„ã€‚
æ³¨é‡Šçš„å†™æ³•:
syntax = &amp;#34;proto3&amp;#34;; /* è¯·æ±‚ç»“æ„ */ message SearchRequest { string query = 1; int32 page_num = 2; int32 page_size = 3; } /* å“åº”ç»“æ„ */ message SearchResponse { repeated string data = 1; int32 total = 2; // æ€»æ•° } å¦‚æœæˆ‘ä»¬åœ¨æ›´æ–°message typeæ—¶ï¼Œæ˜¯ç›´æ¥åˆ é™¤æˆ–è€…æ³¨é‡Šäº†å­—æ®µï¼Œåœ¨ä¹‹åå…¶ä»–äººæ¥æ›´æ–°æ—¶å¯èƒ½ä¼šå¤ç”¨è¢«åˆ é™¤æˆ–æ³¨é‡Šçš„å­—æ®µç¼–å·ï¼Œå¦‚æœè¿™æ—¶åŠ è½½äº†ç›¸åŒprotoçš„æ—§ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ä¸€äº›é”™è¯¯ã€‚æ‰€ä»¥protobufæä¾›äº†ä¿ç•™å­—æ®µçš„æœºåˆ¶ï¼Œä½¿ç”¨reservedå…³é”®å­—ï¼Œå¯ä»¥ä¿ç•™ç¼–å·æˆ–è€…å­—æ®µåã€‚</description>
    </item>
    
    <item>
      <title>ProtobufåŸç†</title>
      <link>https://www.yici.xin/post/tech/protobuf%E5%8E%9F%E7%90%86/</link>
      <pubDate>Tue, 27 Dec 2022 17:52:06 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/protobuf%E5%8E%9F%E7%90%86/</guid>
      <description>protobuf ä»‹ç» ProtoBuf(Protocol Buffers)æ˜¯ä¸€ç§å…·æœ‰è·¨å¹³å°ã€è¯­è¨€æ— å…³ã€å¯æ‰©å±•ç­‰ç‰¹æ€§çš„åºåˆ—åŒ–ç»“æ„æ•°æ®çš„æ–¹æ³•ï¼Œå¯ç”¨äºç½‘ç»œæ•°æ®äº¤æ¢åŠå­˜å‚¨ã€‚å’Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ jsonã€xml æ˜¯åŒä¸€ç§ä¸œè¥¿ã€‚å®ƒåœ¨è§£ææ€§èƒ½å’Œæ•°æ®å‹ç¼©åå¤§å°æ–¹é¢æ¯” jsonã€xml æ›´ä¼˜ç§€ï¼Œç›®å‰å¸¸ç”¨äº rpcã€‚
protobuf åºåˆ—åŒ–æœºåˆ¶ ä¸åŒäºä¼ ç»Ÿçš„åºåˆ—åŒ–æ–¹å¼ï¼Œprotobuf åœ¨åºåˆ—åŒ–æ•°æ®ä¹‹å‰ï¼Œéœ€è¦å…ˆå®šä¹‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒæ˜¯è®°å½•æ•°æ®åœ¨åºåˆ—åŒ–å’Œè§£ææ—¶çš„å‚ç…§ï¼Œæˆ‘ä»¬ç®€å•çœ‹çœ‹å®ƒçš„è¯­æ³•ï¼š
message Person { required int32 id = 1; required string name = 2; required string hobby = 3; } åœ¨è¯¥ç»“æ„ä½“çš„å­—æ®µå®šä¹‰ä¸­ï¼Œæœ‰å‡ ä¸ªå…³é”®ä½ç½®ï¼Œåˆ†åˆ«æ˜¯ç±»å‹(å¦‚ int32)ã€å­—æ®µå(å¦‚ name)ï¼Œä»¥åŠä¸€ä¸ªç¼–å·(å¦‚ 1ã€2ã€3)ï¼Œ
ä½¿ç”¨ protobuf çš„åŒæ–¹éƒ½éœ€è¦ä¾ç…§è¿™ä¸ªç»“æ„ä½“å®šä¹‰æ¥è¿›è¡Œåºåˆ—åŒ–å’Œè§£æã€‚
æˆ‘ä»¬é€šè¿‡å‡ ä¸ªé—®é¢˜æ¥äº†è§£å…¶åºåˆ—åŒ–æœºåˆ¶å§ï¼š
QUESTION1 ğŸ™‹â€â™‚ï¸
åœ¨è§£æåºåˆ—åŒ–æ•°æ®æ—¶ï¼Œæ€ä¹ˆç¡®å®šå½“å‰è§£æçš„æ•°æ®å¯¹åº”å“ªä¸ªå­—æ®µï¼Ÿ åœ¨ä¼ ç»Ÿçš„åºåˆ—åŒ–æœºåˆ¶ä¸­ï¼Œåºåˆ—åŒ–æ•°æ®ä¸å…¶å¯¹åº”çš„å­—æ®µï¼Œéƒ½ä¼šé€šè¿‡å­—æ®µåè¿›è¡Œè”ç³»ï¼Œä½†åœ¨ protobuf çš„åºåˆ—åŒ–ç»“æœä¸­ï¼Œæ˜¯æ²¡æœ‰idã€nameå’Œhobbyè¿™æ ·çš„å­—æ®µåçš„ï¼Œå®ƒä»¬ä¼šè¢«ç¼–å·æ›¿ä»£ã€‚
QUESTION2 ğŸ™‹â€â™‚ï¸
åºåˆ—åŒ–åçš„å­—èŠ‚æµï¼Œå¦‚ä½•åˆ†éš”å„ä¸ªå­—æ®µï¼Ÿ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæ•°æ®æœ€ç»ˆåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä»¥ä¸€ä¸ªä¸ªå­—èŠ‚çš„äºŒè¿›åˆ¶å½¢å¼ä¼ è¾“çš„ï¼Œé¢å¯¹ä¸€é•¿ä¸²çš„å­—èŠ‚æµï¼Œå¦‚ä½•ç¡®å®šæ¯ä¸ªå­—æ®µçš„å­—èŠ‚æµæ®µå‘¢ï¼Ÿ åœ¨æ¯ä¸ªå­—æ®µçš„å­—èŠ‚æµæœ€å‰é¢ï¼Œä¼šæœ‰å‡ ä¸ªç‰¹æ®Šå­—èŠ‚ï¼Œç§°ä¸º Tagï¼ŒTag å°±å……å½“äº†è¾¹ç•Œçš„ä½œç”¨ï¼Œåˆ†éš”å„ä¸ªå­—æ®µã€‚
å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå­—èŠ‚æµçœ‹æˆä¸€ä¸ªä¸ªç”± Tag å’Œæ•°æ®(value)ç»„æˆçš„ç»“æ„ã€‚
Tag ä¸ä»…ä»…åªæ˜¯èµ·åˆ°äº†åˆ†éš”å­—æ®µçš„ä½œç”¨ï¼Œå®ƒè¿˜æ‰¿è½½äº†ç±»å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Tag æ˜¯å¦‚ä½•ç”Ÿæˆçš„:
static int makeTag(final int fieldNumber, final int wireType) { return (filedNumber &amp;lt;&amp;lt; 3) | wireType; } å…¶ä¸­çš„fieldNumberï¼Œå°±æ˜¯æˆ‘ä»¬å®šä¹‰ç»“æ„ä½“æ—¶ç»™çš„ç¼–å·ï¼ŒwireTypeæœ‰ä»¥ä¸‹å‡ ä¸ªå€¼ï¼š</description>
    </item>
    
    <item>
      <title>ä¸€äº›ruståŸºç¡€çŸ¥è¯†</title>
      <link>https://www.yici.xin/post/tech/%E4%B8%80%E4%BA%9Brust%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</link>
      <pubDate>Wed, 21 Dec 2022 18:14:01 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/%E4%B8%80%E4%BA%9Brust%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</guid>
      <description>å˜é‡ä¸å¯å˜æ€§ å˜é‡çš„å¯å˜æ€§ rustä¸­è¿›è¡Œå˜é‡çš„å£°æ˜æ—¶ï¼Œä½¿ç”¨letå…³é”®å­—ï¼Œå¦‚:
let x; è¿™æ ·å£°æ˜å‡ºæ¥çš„å˜é‡æ˜¯ä¸å¯å˜çš„ï¼Œä¸å¯ä»¥è¿›è¡Œç¬¬äºŒæ¬¡èµ‹å€¼ã€‚ å¦‚æœéœ€è¦åç»­å¯ä»¥ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œåœ¨å£°æ˜æ—¶éœ€è¦åŠ ä¸Šmutå…³é”®å­—:
let mut x; å¸¸é‡ å£°æ˜å¸¸é‡ä½¿ç”¨Â constÂ å…³é”®å­—è€Œä¸æ˜¯Â letï¼Œå¹¶ä¸”å¿…é¡»æ³¨æ˜å€¼çš„ç±»å‹ï¼Œä¸”å£°æ˜æ—¶å°±å¿…é¡»èµ‹å€¼ã€‚
// âœ… const THREE_HOURS_IN_SECONDS: u32 = 3 * 60 * 60; // âŒ const THREE_HOURS_IN_SECONDS: u32; THREE_HOURS_IN_SECONDS = 3 * 60 * 60 ä¸å¯å˜å˜é‡ä¸å¸¸é‡æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?
é¦–å…ˆä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå£°æ˜å¸¸é‡æ—¶æä¾›çš„å€¼å¿…é¡»æ˜¯ç¼–è¯‘æœŸé—´å°±å¯ä»¥è®¡ç®—å‡ºæ¥çš„ï¼Œè€Œä¸å¯å˜å˜é‡è™½ç„¶ä¸å¯å˜ï¼Œä½†æ˜¯å£°æ˜æ—¶å¯ä»¥ä½¿ç”¨è¿è¡Œæ—¶å€¼ã€‚ å†…å­˜å¸ƒå±€è§’åº¦æ¥çœ‹ï¼Œå¸¸é‡ä¸€èˆ¬éƒ½æ˜¯å­˜å‚¨åœ¨æ•°æ®æ®µï¼Œè€Œå˜é‡ä¼šåœ¨æ ˆåŒºæˆ–å †åŒºã€‚ éšè— rustä¸­ï¼Œå¯ä»¥ä½¿ç”¨letå®šä¹‰ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ï¼Œæ­¤æ—¶åŒåçš„ç¬¬ä¸€ä¸ªå˜é‡éšè—äº†ã€‚
fn main() { // å®šä¹‰x let x = 5; // å†æ¬¡å®šä¹‰xï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªxè¢«éšè— let x = 6; { // å†æ¬¡å®šä¹‰xï¼Œä½†æ˜¯ä»…åœ¨è¯¥ä½œç”¨åŸŸå†…ç”Ÿæ•ˆ let x = x * 2; println!(&amp;#34;The value of x in the inner scope is: {x}&amp;#34;); // 12 } println!</description>
    </item>
    
    <item>
      <title>Go Sync Pool</title>
      <link>https://www.yici.xin/post/tech/go-sync-pool/</link>
      <pubDate>Mon, 21 Nov 2022 17:05:22 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/go-sync-pool/</guid>
      <description>go sync pool</description>
    </item>
    
    <item>
      <title>Go channel</title>
      <link>https://www.yici.xin/post/tech/go-channel/</link>
      <pubDate>Mon, 21 Nov 2022 09:45:13 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/go-channel/</guid>
      <description>æ•°æ®ç»“æ„ channel çš„åº•å±‚æºç å’Œç›¸å…³å®ç°åœ¨/src/runtime/chan.goä¸­ã€‚
type hchan struct { qcount uint // é˜Ÿåˆ—ä¸­æ‰€æœ‰æ•°æ®æ€»æ•° dataqsiz uint // ç¯å½¢é˜Ÿåˆ—çš„ size buf unsafe.Pointer // æŒ‡å‘ dataqsiz é•¿åº¦çš„æ•°ç»„ elemsize uint16 // å…ƒç´ å¤§å° closed uint32 elemtype *_type // å…ƒç´ ç±»å‹ sendx uint // å·²å‘é€çš„å…ƒç´ åœ¨ç¯å½¢é˜Ÿåˆ—ä¸­çš„ä½ç½® recvx uint // å·²æ¥æ”¶çš„å…ƒç´ åœ¨ç¯å½¢é˜Ÿåˆ—ä¸­çš„ä½ç½® recvq waitq // æ¥æ”¶è€…çš„ç­‰å¾…é˜Ÿåˆ— sendq waitq // å‘é€è€…çš„ç­‰å¾…é˜Ÿåˆ— // lock é”ä¿æŠ¤ hchan ä¸­çš„æ‰€æœ‰å­—æ®µï¼Œä»¥åŠæ­¤é€šé“ä¸Šè¢«é˜»å¡çš„ sudogs ä¸­çš„å¤šä¸ªå­—æ®µã€‚ // æŒæœ‰ lock çš„æ—¶å€™ï¼Œç¦æ­¢æ›´æ”¹å¦ä¸€ä¸ª G çš„çŠ¶æ€ï¼ˆç‰¹åˆ«æ˜¯ä¸è¦ä½¿ G çŠ¶æ€å˜æˆreadyï¼‰ï¼Œ // å› ä¸ºè¿™ä¼šå› ä¸ºå †æ ˆ shrinking è€Œå‘ç”Ÿæ­»é”ã€‚ lock mutex } recvq å’Œ sendq æ˜¯ç­‰å¾…é˜Ÿåˆ—ï¼Œwaitq ç±»å‹æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼š</description>
    </item>
    
    <item>
      <title>Short_code</title>
      <link>https://www.yici.xin/post/tech/short_code/</link>
      <pubDate>Sat, 19 Nov 2022 18:05:50 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/short_code/</guid>
      <description>Short_code 1. marké«˜äº® è¿™æ˜¯ä¸€ä¸ªé‡ç‚¹æ ‡è®° æ–‡å­—å±…ä¸­
ğŸ¤“
è¿™æ˜¯ä¸€æ¡ä¿¡æ¯ &lt;!DOCTYPE HTML&gt; &lt;!DOCTYPE HTML&gt; MacOS Linux Windows MacOS This is tab MacOS content.
Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter! Oculis non ritibus Telethusa protulit, sed sed aere valvis inhaesuro Pallas animam: qui quid, ignes. Miseratus fonte Ditis conubia.
Linux This is tab Linux content.
Lorem markdownum insigne. Olympo signis Delphis! Retexi Nereius nova develat stringit, frustra Saturnius uteroque inter!</description>
    </item>
    
    <item>
      <title>golang-mapä»‹ç»</title>
      <link>https://www.yici.xin/post/tech/golang-map%E4%BB%8B%E7%BB%8D/</link>
      <pubDate>Wed, 05 Jan 2022 23:38:06 +0800</pubDate>
      
      <guid>https://www.yici.xin/post/tech/golang-map%E4%BB%8B%E7%BB%8D/</guid>
      <description>æœ¬æ–‡ä¸­ä½¿ç”¨çš„ go ç‰ˆæœ¬ï¼š
go version go1.17.2 darwin/amd64
å†…å®¹æ¦‚è¿° æœ¬æ–‡ä»‹ç» golang ä¸­ç»å¸¸ç”¨åˆ°çš„ç»“æ„-mapï¼Œç®€ç§°å“ˆå¸Œè¡¨ã€å­—å…¸ã€‚ä»‹ç»å…¶ç»“æ„åŠè®¾è®¡æ€è·¯ã€‚
map åœ¨æºç ä¸­çš„ç»“æ„â€”â€”hmap Go è¯­è¨€é‡‡ç”¨çš„æ ¸å¿ƒæ•°æ®ç»“æ„æ˜¯å“ˆå¸ŒæŸ¥æ‰¾è¡¨ï¼Œä½¿ç”¨é“¾è¡¨è§£å†³å“ˆå¸Œå†²çªã€‚
åœ¨æºç ä¸­$GOROOT/src/runtime/map.goï¼Œmap çš„æ ¸å¿ƒç»“æ„ä½“æ˜¯è¿™æ ·çš„ï¼š
// A header for a Go map. type hmap struct { count int // mapä¸­çš„å…ƒç´ æ•°é‡ï¼Œå³len(map)æ—¶çš„è¿”å›å€¼ flags uint8 B uint8 // bucketsçš„ä»¥2ä¸ºåº•çš„å¯¹æ•°, å³2^B=buckets noverflow uint16 // æº¢å‡ºæ¡¶çš„è¿‘ä¼¼æ•°; see incrnoverflow for details hash0 uint32 // å“ˆå¸Œç§å­ buckets unsafe.Pointer // 2^Bä¸ªbucketçš„æ•°ç»„ï¼Œmay be nil if count==0. oldbuckets unsafe.Pointer // å“ˆå¸Œåœ¨æ‰©å®¹æ—¶ç”¨äºä¿å­˜ä¹‹å‰ buckets çš„å­—æ®µï¼Œå®ƒçš„å¤§å°æ˜¯å½“å‰ buckets çš„ä¸€åŠï¼› nevacuate uintptr // progress counter for evacuation (buckets less than this have been evacuated) extra *mapextra // optional fields } åœ¨ä¸Šé¢æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ ¸å¿ƒæ˜¯bucketsï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæœ€ç»ˆæŒ‡å‘äº†bmapç»“æ„ä½“æ•°ç»„</description>
    </item>
    
    
  </channel>
</rss>
