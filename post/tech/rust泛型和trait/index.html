<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css integrity=sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm crossorigin=anonymous><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js integrity=sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js integrity=sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js integrity=sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl crossorigin=anonymous></script><title>Rustâ€”â€”æ³›å‹å’Œtrait | yicixin's blog</title><meta name=keywords content="rust,æ³›å‹,trait"><meta name=description content="æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:
fn largest_i32(list: &[i32]) -> &amp;i32 { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:
fn largest_char(list: &[char]) -> &amp;char { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚
æ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:
fn largest_t<T>(list: &[T]) -> &amp;T { let mut largest = &amp;list[0]; for item in list."><meta name=author content="å£¹æ¬¡å¿ƒ"><link rel=canonical href=https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.00d594ac5404702263b7df2f247aae4053818963176b093f9b95a1fc7e4e0b42.css integrity="sha256-ANWUrFQEcCJjt98vJHquQFOBiWMXawk/m5Wh/H5OC0I=" rel="preload stylesheet" as=style><link rel=icon href=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg><link rel=icon type=image/png sizes=16x16 href=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg><link rel=icon type=image/png sizes=32x32 href=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg><link rel=apple-touch-icon href=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg><link rel=mask-icon href=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Rustâ€”â€”æ³›å‹å’Œtrait"><meta property="og:description" content="æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:
fn largest_i32(list: &[i32]) -> &amp;i32 { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:
fn largest_char(list: &[char]) -> &amp;char { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚
æ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:
fn largest_t<T>(list: &[T]) -> &amp;T { let mut largest = &amp;list[0]; for item in list."><meta property="og:type" content="article"><meta property="og:url" content="https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/"><meta property="og:image" content="https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202301181427569.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-01-18T14:16:44+08:00"><meta property="article:modified_time" content="2023-01-18T14:16:44+08:00"><meta property="og:site_name" content="yicixin's blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202301181427569.png"><meta name=twitter:title content="Rustâ€”â€”æ³›å‹å’Œtrait"><meta name=twitter:description content="æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:
fn largest_i32(list: &[i32]) -> &amp;i32 { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:
fn largest_char(list: &[char]) -> &amp;char { let mut largest = &amp;list[0]; for item in list.iter() { if item > largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚
æ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:
fn largest_t<T>(list: &[T]) -> &amp;T { let mut largest = &amp;list[0]; for item in list."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.yici.xin/post/"},{"@type":"ListItem","position":2,"name":"ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯","item":"https://www.yici.xin/post/tech/"},{"@type":"ListItem","position":3,"name":"Rustâ€”â€”æ³›å‹å’Œtrait","item":"https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rustâ€”â€”æ³›å‹å’Œtrait","name":"Rustâ€”â€”æ³›å‹å’Œtrait","description":"æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:\nfn largest_i32(list: \u0026amp;[i32]) -\u0026gt; \u0026amp;i32 { let mut largest = \u0026amp;list[0]; for item in list.iter() { if item \u0026gt; largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:\nfn largest_char(list: \u0026amp;[char]) -\u0026gt; \u0026amp;char { let mut largest = \u0026amp;list[0]; for item in list.iter() { if item \u0026gt; largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚\næ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:\nfn largest_t\u0026lt;T\u0026gt;(list: \u0026amp;[T]) -\u0026gt; \u0026amp;T { let mut largest = \u0026amp;list[0]; for item in list.","keywords":["rust","æ³›å‹","trait"],"articleBody":"æ³›å‹ å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹ å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:\nfn largest_i32(list: \u0026[i32]) -\u003e \u0026i32 { let mut largest = \u0026list[0]; for item in list.iter() { if item \u003e largest { largest = item; } } largest } è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:\nfn largest_char(list: \u0026[char]) -\u003e \u0026char { let mut largest = \u0026list[0]; for item in list.iter() { if item \u003e largest { largest = item; } } largest } å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚\næ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:\nfn largest_t\u003cT\u003e(list: \u0026[T]) -\u003e \u0026T { let mut largest = \u0026list[0]; for item in list.iter() { if item \u003e largest { largest = item; } } largest } é¦–å…ˆæˆ‘ä»¬åœ¨å‡½æ•°ååæ·»åŠ äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå‚æ•°listä¹Ÿå˜æˆäº†ä¸€ä¸ªæ³›å‹sliceï¼ŒåŒæ ·çš„ï¼Œè¿”å›å€¼ä¹Ÿè¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œæˆ‘ä»¬çš„å‡½æ•°ä½“ä¸éœ€è¦ä»»ä½•ä¿®æ”¹ã€‚\næˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•°:\nfn main() { let number_list = vec![34, 50, 25, 100, 65]; let result = largest_t(\u0026number_list); println!(\"The largest number is {}\", result); let char_list = vec!['y', 'm', 'a', 'q']; let result = largest_t(\u0026char_list); println!(\"The largest char is {}\", result); } i32å’Œcharç±»å‹çš„largest_tæ–¹æ³•è°ƒç”¨å½¢å¼æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºrustå¯ä»¥é€šè¿‡ä¼ å…¥çš„å‚æ•°ç±»å‹è‡ªè¡Œæ¨æ–­æ³›å‹Tçš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ä¸ºlargest_tæä¾›å…·ä½“ç±»å‹ä¿¡æ¯ã€‚\nä½†æ˜¯è¿™ä¸ªlargest_tå‡½æ•°ç›®å‰è¿˜æ˜¯æ— æ³•è¿è¡Œçš„: å› ä¸ºæˆ‘ä»¬è¿˜å°‘è€ƒè™‘äº†ä¸€ä»¶äº‹ï¼Œæˆ‘ä»¬çš„å‡½æ•°ä½“ä¸­å«æœ‰äº†\u0026Tçš„æ¯”è¾ƒæ“ä½œï¼Œä½†å½“å‰è¿™ä¸ªæ³›å‹å‚æ•°Tä»£è¡¨äº†ä»»æ„ç±»å‹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½å¤Ÿæ”¯æŒæ¯”è¾ƒæ“ä½œç¬¦ï¼Œå¯¹äºä¸æ”¯æŒæ¯”è¾ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬åº”è¯¥é™åˆ¶å®ƒçš„ä¼ å…¥ã€‚ ç¼–è¯‘å™¨ç»™å‡ºäº†æç¤ºï¼Œè€ƒè™‘å¯¹ç±»å‹å‚æ•°TåŠ ä¸Šé™åˆ¶ï¼Œç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸€ä¸ªtraitï¼Œæˆ‘ä»¬åæ–‡ä¼šè§£æï¼Œå®ƒåœ¨è¿™é‡Œçš„ä½œç”¨å°±æ˜¯é™åˆ¶æ³›å‹å‚æ•°Tçš„å…·ä½“ç±»å‹å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ã€‚ æ·»åŠ ä¸Šè¿™ä¸ªtraitåï¼Œä»£ç å°±å¯ä»¥æ‰§è¡Œäº†ã€‚ é™¤äº†åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹å‚æ•°æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼Œå®šä¹‰ç»“æ„ä½“å’Œæšä¸¾æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹å‚æ•°ã€‚\nç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹ struct Point\u003cT\u003e { x: T, y: T, } fn main() { let integer = Point { x: 5, y: 10 }; // âœ… let float = Point { x: 1.0, y: 4.0 }; // âœ… let e = Point { x: 1, y: 4.0 }; // âŒ å®ä¾‹åŒ–æ—¶xå’Œyçš„å…·ä½“ç±»å‹ä¸ä¸€è‡´ } æ³›å‹å‚æ•°çš„å£°æ˜ä½äºç»“æ„ä½“åç§°ä¹‹åï¼Œä½¿ç”¨å°–æ‹¬å·åŒ…è£¹ï¼Œåœ¨æˆå‘˜å®šä¹‰ä¸­å¯ä»¥ä½¿ç”¨ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»…å£°æ˜äº†ä¸€ä¸ªæ³›å‹å‚æ•°Tï¼Œæˆå‘˜xå’Œæˆå‘˜yéƒ½æ˜¯Tç±»å‹ï¼Œæ‰€ä»¥xå’Œyå¯¹åº”çš„å…·ä½“ç±»å‹ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼Œä¾‹å¦‚éƒ½æ˜¯i32æˆ–è€…éƒ½æ˜¯f64ã€‚ å¦‚æœå¸Œæœ›xå’Œyå¯ä»¥æ˜¯ä¸åŒç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸¤ä¸ªæ³›å‹å‚æ•°:\nstruct Point\u003cT, U\u003e { x: T, y: U, } fn main() { let both_integer = Point { x: 5, y: 10 }; let both_float = Point { x: 1.0, y: 4.0 }; let integer_and_float = Point { x: 5, y: 4.0 }; } æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹ æšä¸¾å®šä¹‰ä½¿ç”¨æ³›å‹ä¹‹å‰å·²ç»è§è¿‡äº†:\nenum Option\u003cT\u003e { Some(T), None, } enum Result\u003cT, E\u003e { Ok(T), Err(E), } æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹ æ–¹æ³•å®šä¹‰å¯ä»¥åœ¨æ³›å‹å‚æ•°ä¸Šå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹å…·ä½“ç±»å‹å®šä¹‰\nstruct Point\u003cT\u003e { x: T, y: T, } impl\u003cT\u003e Point\u003cT\u003e { fn x(\u0026self) -\u003e \u0026T { \u0026self.x } } // ä»…Pointæ‹¥æœ‰ impl Point\u003cf32\u003e { fn distance_from_origin(\u0026self) -\u003e f32 { (self.x.powi(2) + self.y.powi(2)).sqrt() } } fn main() { let p = Point { x: 5, y: 10 }; println!(\"p.x = {}\", p.x()); } struct Point\u003cT, U\u003e { x: T, y: U, } impl\u003cT, U\u003e Point\u003cT, U\u003e { // åœ¨æ–¹æ³•çš„ç­¾åä¸­å®šä¹‰å¦å¤–çš„æ³›å‹å‚æ•° fn mixup\u003cV, W\u003e(self, other: Point\u003cV, W\u003e) -\u003e Point\u003cT, W\u003e { Point { x: self.x, y: other.y, } } } fn main() { let p1 = Point { x: 5, y: 10.4 }; let p2 = Point { x: \"Hello\", y: 'c' }; let p3 = p1.mixup(p2); println!(\"p3.x = {}, p3.y = {}\", p3.x, p3.y); } rustçš„æ³›å‹åŸç†\nrustçš„æ³›å‹åŸç†æ˜¯ç”Ÿæˆä»£ç å¼ï¼Œç¼–è¯‘å™¨æ ¹æ®æˆ‘ä»¬è°ƒç”¨æ³›å‹ä»£ç æ—¶æä¾›çš„ç±»å‹ï¼Œç”Ÿæˆå¯¹åº”çš„å…·ä½“ç±»å‹ä»£ç ï¼Œä¾‹å¦‚ä¸Šæ–‡ä¸­ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ³›å‹å‡½æ•°largest_tç”Ÿæˆå…·ä½“çš„i32ç‰ˆæœ¬å’Œcharç‰ˆæœ¬ï¼Œè¿™å’Œä½ æ‰‹å†™é‡å¤ä»£ç æ²¡æœ‰åŒºåˆ«ã€‚æ‰€ä»¥ä»ç¼–è¯‘åå¾—åˆ°çš„æœ€ç»ˆç»“æœæ¥çœ‹ï¼Œä½¿ç”¨æ³›å‹æ²¡æœ‰æ€§èƒ½ä¸Šçš„æŸå¤±ã€‚ trait traitåœ¨rustä¸­å¸¸å’Œæ³›å‹æ­é…ä½¿ç”¨ï¼Œå®ƒå’Œgoè¯­è¨€ä¸­çš„æ¥å£(interface)å¾ˆåƒï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œgoè¯­è¨€ä¸­æ¥å£çš„å®ç°æ˜¯éšå¼çš„ï¼Œè€Œrustä¸­å®ç°traitéœ€è¦æ˜¾å¼çš„å£°æ˜ã€‚\nå¦‚ä½•ç†è§£traitå’Œæ³›å‹çš„å…³ç³»\nå½“æˆ‘ä»¬ç®€å•å£°æ˜ä¸€ä¸ªæ³›å‹Tï¼Œæ­¤æ—¶å®ƒå¯ä»¥ä»£è¡¨ä»»æ„ç±»å‹ï¼Œä½†ä»»æ„ç±»å‹å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹Tåšä»»æ„æ“ä½œï¼Œç›¸åï¼Œæ­¤æ—¶æˆ‘ä»¬æ— æ³•å¯¹Tåšä»»ä½•æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•æ§åˆ¶å¤–éƒ¨ä¼ å…¥çš„å…·ä½“ç±»å‹ä¸€å®šæ”¯æŒæˆ‘ä»¬æ‰€åšçš„æ“ä½œã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯¹Tè¦åšçš„æ“ä½œè¶Šå¤šï¼Œç›¸åº”å¯¹Tçš„é™åˆ¶å°±è¶Šå¤šã€‚traitå°±æ˜¯ç”¨æ¥é™„åŠ è¿™äº›é™åˆ¶çš„æ‰‹æ®µã€‚ æˆ–è€…æ¢ä¸ªè§’åº¦ï¼Œtraitæ˜¯ç»™æ³›å‹Tæä¾›è¡Œä¸ºçš„æ‰‹æ®µï¼Œä¸€ä¸ªå…‰ç§ƒç§ƒçš„æ³›å‹Tï¼Œå®ƒä¸å…·æœ‰ä»»ä½•è¡Œä¸ºï¼Œé€šè¿‡traitå¯ä»¥ç»™æ³›å‹Tæ·»åŠ è¡Œä¸ºï¼Œä»è€Œæ”¯æŒæˆ‘ä»¬éœ€è¦çš„æ“ä½œã€‚ å®šä¹‰trait // ä½¿ç”¨traitå…³é”®å­—ï¼Œpubå…³é”®å­—å…è®¸åœ¨å…¶ä»–crateå®ç°è¯¥trait pub trait Summary { // ä»…ç»™æ–¹æ³•ç­¾åè€Œä¸éœ€è¦å‡½æ•°ä½“ï¼Œä»¥åˆ†å·ç»“å°¾ fn summarize(\u0026self) -\u003e String; } ä¸ºç±»å‹å®ç°trait pub struct NewsArticle { pub headline: String, pub location: String, pub author: String, pub content: String, } // ä½¿ç”¨impl+forå…³é”®å­— impl Summary for NewsArticle { // æä¾›å…·ä½“å‡½æ•°ä½“ fn summarize(\u0026self) -\u003e String { format!(\"{}, by {} ({})\", self.headline, self.author, self.location) } } å®ç°traitçš„ä½œç”¨åŸŸé—®é¢˜\nä½ å¯ä»¥åœ¨è‡ªå·±çš„crateå†…ä¸ºå†…éƒ¨ç±»å‹å®ç°å¤–éƒ¨å…¬å…±çš„traitï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„crateä¸­ä¸ºå¤–éƒ¨çš„ç±»å‹å®ç°æˆ‘ä»¬å†…éƒ¨çš„traitã€‚ ä½†æ˜¯ä½ ä¸èƒ½åœ¨è‡ªå·±çš„crateä¸­ï¼Œä¸ºå¤–éƒ¨ç±»å‹å®ç°å¤–éƒ¨çš„traitã€‚è¿™ä¸ªè§„åˆ™æ˜¯ä¸ºäº†é™åˆ¶ä¸¤ä¸ªcrateéƒ½ä¸ºåŒä¸€ä¸ªç±»å‹å®ç°åŒä¸€ä¸ªtraitï¼Œrustç¼–è¯‘å™¨æ— æ³•çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚ traitçš„é»˜è®¤å®ç° æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰traitæ—¶å°±ä¸ºæ–¹æ³•ç­¾åæä¾›å…·ä½“å®ç°ï¼Œè¿™ç§å®ç°ç§°ä¸ºé»˜è®¤å®ç°ã€‚\npub trait Summary { fn summarize(\u0026self) -\u003e String { String::from(\"(Read more...)\") } } ä¸ºç±»å‹å®ç°traitæ—¶ï¼Œå¦‚æœåªæœ‰è¯¥traitä»…æœ‰é»˜è®¤å®ç°ï¼Œç±»å‹å¯ä»¥ä¸æä¾›å…·ä½“å®ç°è€Œç›´æ¥ç»§æ‰¿è¯¥traitçš„æ‰€ä»¥é»˜è®¤å®ç°:\npub trait Summary { fn summarize(\u0026self) -\u003e String { String::from(\"(Read more...)\") } } pub struct NewsArticle { pub headline: String, pub location: String, pub author: String, pub content: String, } // å…·ä½“å®ç°ç•™ç©ºå³å¯ impl Summary for NewsArticle {} å¦‚æœç±»å‹å®ç°traitæ—¶ä¸ºé»˜è®¤å®ç°ä¹Ÿæä¾›äº†å…·ä½“å®ç°ï¼Œåˆ™ä¼šå‘ç”Ÿé‡è½½ã€‚\nå¦‚æœtraité™¤äº†é»˜è®¤å®ç°å¤–è¿˜æœ‰å…¶ä»–æ–¹æ³•å®šä¹‰ï¼Œåˆ™ç±»å‹å®ç°è¯¥traitæ—¶ï¼Œéœ€è¦ä¸ºæ‰€æœ‰éé»˜è®¤å®ç°æä¾›å…·ä½“å®ç°:\npub trait Summary { fn summarize(\u0026self) -\u003e String { String::from(\"(Read more...)\") } fn summarize_author(\u0026self) -\u003e String; } pub struct NewsArticle { pub headline: String, pub location: String, pub author: String, pub content: String, } // NewsArticleç›´æ¥ç»§æ‰¿äº†summarizeï¼Œè€Œsummarize_authorå¿…é¡»æä¾›å…·ä½“å®ç° impl Summary for NewsArticle { fn summarize_author(\u0026self) -\u003e String { format!(\"@{}\", self.author) } } å› ä¸ºåœ¨å®šä¹‰traitæ—¶ï¼Œé»˜è®¤å®ç°å°±æä¾›äº†å…·ä½“ä»£ç ï¼Œæ‰€ä»¥åœ¨é»˜è®¤å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥traitçš„å…¶ä»–é»˜è®¤å®ç°æˆ–æ–¹æ³•:\npub trait Summary { fn summarize(\u0026self) -\u003e String { format!(\"author is {}, content is {}\", self.summarize_author(), self.summarize_content()) } fn summarize_author(\u0026self) -\u003e String; fn summarize_content(\u0026self) -\u003e String; } pub struct NewsArticle { pub headline: String, pub location: String, pub author: String, pub content: String, } impl Summary for NewsArticle { fn summarize_author(\u0026self) -\u003e String { format!(\"@@@{}\", self.author) } fn summarize_content(\u0026self) -\u003e String { format!(\"!!!{}\", self.content) } } fn main() { let article = NewsArticle { headline: String::from(\"headline\"), location: String::from(\"location\"), author: String::from(\"author\"), content: String::from(\"content\"), }; println!(\"{}\", article.summarize()); } é»˜è®¤å®ç°ç‰¹æ€§ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¿«é€Ÿä¸ºç±»å‹æ·»åŠ æ–¹æ³•ï¼Œè¿™åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é€šå¸¸éœ€è¦ç”¨ç»§æ‰¿æˆ–ç»„åˆå…¶ä»–ç»“æ„ä½“çš„å½¢å¼å®ç°ã€‚\nä½¿ç”¨trait æ­£å¦‚goä¸­çš„æ¥å£ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨traitæ›¿æ¢å…·ä½“ç±»å‹ï¼Œè¿™ä½¿å¾—è¯¥å‡½æ•°ä¸å†ä¸æŸä¸€å…·ä½“ç±»å‹è€¦åˆï¼Œä»…ä¸traitæ‰€ä»£è¡¨çš„ä¸€ç±»è¡Œä¸ºç›¸å…³ï¼Œå³â€”â€”é¢å¯¹æŠ½è±¡è€Œä¸æ˜¯å…·ä½“ã€‚\n// ä½¿ç”¨impl+traitæ›¿æ¢å…·ä½“ç±»å‹ï¼Œitemå‚æ•°å…è®¸ä¼ å…¥æ‰€æœ‰å®ç°äº†Summaryçš„ç±»å‹ pub fn notify(item: impl Summary) { println!(\"Breaking news! {}\", item.summarize()); } å‡½æ•°ä¸­çš„impl+traitå½¢å¼å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨æ¯”è¾ƒç›´è§‚ç®€å•çš„åœºæ™¯ä½¿ç”¨å®ƒã€‚è€Œå®ƒåŸæœ¬çš„å½¢å¼æ˜¯:\npub fn notify\u003cT: Summary\u003e(item: T) { println!(\"Breaking news! {}\", item.summarize()); } è¿™ç§å†™æ³•ç§°ä¸ºtrait boundï¼Œtrait boundä¸æ³›å‹å‚æ•°æ­é…ï¼Œè¡¨è¾¾æ³›å‹å‚æ•°çš„å¯ç”¨è¡Œä¸ºã€‚ä½¿ç”¨trait boundçš„å†™æ³•å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„åœºæ™¯ã€‚\nimpl+traitå’Œtrait boundçš„åŒºåˆ«\nè¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼Œitem1å’Œitem2å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹\npub fn notify(item1: impl Summary, item2: impl Summary) pub fn notify\u003cT: Summary, U: Summary\u003e(item1:T, item2:U) å¦‚æœæˆ‘ä»¬éœ€è¦é™åˆ¶ä¼ å…¥çš„item1å’Œitem2å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œåˆ™åªèƒ½ç”¨trait boundè¯­æ³•:\npub fn notify\u003cT: Summary\u003e(item1: T, item2: T) å‡½æ•°å‚æ•°å¯ä»¥ä½¿ç”¨çš„traitä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨+æ¥åŠ å…¥æ›´å¤štrait:\npub fn notify(item: impl Summary + Display) or pub fn notify\u003cT: Summary + Display\u003e(item: T) è¿™è¡¨ç¤ºitemå‚æ•°éœ€è¦åŒæ—¶å®ç°Summaryå’ŒDisplayè¿™ä¸¤ä¸ªtraitã€‚\nrustè¿˜æä¾›äº†whereè¯­æ³•ä¼˜åŒ–é•¿ä¸²çš„trait bound:\nfn some_function\u003cT: Display + Clone, U: Clone + Debug\u003e(t: T, u: U) -\u003e i32{} fn some_function\u003cT, U\u003e(t: T, u: U) -\u003e i32 where T: Display + Clone, U: Clone + Debug {} æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait boundæ–¹æ³• use std::fmt::Display; struct Pair\u003cT\u003e { x: T, y: T, } impl\u003cT\u003e Pair\u003cT\u003e { fn new(x: T, y: T) -\u003e Self { Self { x, y, } } } // ä»…å½“Tå®ç°äº†Display + PartialOrdæ—¶ï¼Œè¯¥Paitæ‰èƒ½è°ƒç”¨cmp_displayæ–¹æ³• impl\u003cT: Display + PartialOrd\u003e Pair\u003cT\u003e { fn cmp_display(\u0026self) { if self.x \u003e= self.y { println!(\"The largest member is x = {}\", self.x); } else { println!(\"The largest member is y = {}\", self.y); } } } struct I32 { x: i32, } impl I32 { fn new(x: i32) -\u003e Self { Self { x, } } } fn main() { // i32ç±»å‹å®ç°äº†Display + PartialOrd let pair = Pair::new(2, 3); pair.cmp_display(); // f64ä¹Ÿå¯ä»¥ let pair = Pair::new(3.0, 2.0); pair.cmp_display(); // âŒè‡ªå®šä¹‰çš„I32ç±»å‹è°ƒç”¨å¤±è´¥ let pair = Pair::new(I32::new(2), I32::new(3)); pair.cmp_display(); } Blanket implementations å¯¹ä»»ä½•æ»¡è¶³ç‰¹å®š trait bound çš„ç±»å‹å®ç° trait è¢«ç§°ä¸ºÂ blanket implementationsï¼Œä»–ä»¬è¢«å¹¿æ³›çš„ç”¨äº Rust æ ‡å‡†åº“ä¸­ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†åº“ä¸ºä»»ä½•å®ç°äº†Â DisplayÂ trait çš„ç±»å‹å®ç°äº†Â ToStringÂ traitã€‚è¿™ä¸ªÂ implÂ å—çœ‹èµ·æ¥åƒè¿™æ ·ï¼š\nimpl\u003cT: Display\u003e ToString for T { // --snip-- } å› ä¸ºæ ‡å‡†åº“æœ‰äº†è¿™äº› blanket implementationï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•å®ç°äº†Â DisplayÂ trait çš„ç±»å‹è°ƒç”¨ç”±Â ToStringÂ å®šä¹‰çš„Â to_stringÂ æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ•´å‹è½¬æ¢ä¸ºå¯¹åº”çš„Â StringÂ å€¼ï¼Œå› ä¸ºæ•´å‹å®ç°äº†Â Displayï¼š\nlet s = 3.to_string(); è¿™é‡Œæ„Ÿè§‰å’Œé»˜è®¤å®ç°æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºå®ç°äº†traitçš„ç±»å‹å¢åŠ æ–¹æ³•ã€‚ ","wordCount":"909","inLanguage":"zh","image":"https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202301181427569.png","datePublished":"2023-01-18T14:16:44+08:00","dateModified":"2023-01-18T14:16:44+08:00","author":[{"@type":"Person","name":"å£¹æ¬¡å¿ƒ"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.yici.xin/post/tech/rust%E6%B3%9B%E5%9E%8B%E5%92%8Ctrait/"},"publisher":{"@type":"Organization","name":"yicixin's blog","logo":{"@type":"ImageObject","url":"https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202211171234877.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.yici.xin/ accesskey=h title="ğŸ‘€ (Alt + H)">ğŸ‘€</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.yici.xin/tags/ title=æ ‡ç­¾ğŸ·ï¸><span>æ ‡ç­¾ğŸ·ï¸</span></a></li><li><a href=https://www.yici.xin/archives/ title=å½’æ¡£ğŸ•°ï¸><span>å½’æ¡£ğŸ•°ï¸</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.yici.xin/>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://www.yici.xin/post/>Posts</a>&nbsp;Â»&nbsp;<a href=https://www.yici.xin/post/tech/>ğŸ‘¨ğŸ»â€ğŸ’»æŠ€æœ¯</a></div><h1 class=post-title>Rustâ€”â€”æ³›å‹å’Œtrait</h1><div class=post-meta><span title='2023-01-18 14:16:44 +0800 +0800'>2023-01-18</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;909 å­—&nbsp;Â·&nbsp;å£¹æ¬¡å¿ƒ&nbsp;|&nbsp;<a href=https://github.com/yicixin/blog/blob/main/content/post/tech/rust%e2%80%94%e2%80%94%e6%b3%9b%e5%9e%8b%e5%92%8ctrait.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-single-cover><img loading=lazy src=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202301181427569.png alt></figure><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e6%b3%9b%e5%9e%8b aria-label=æ³›å‹>æ³›å‹</a><ul><li><a href=#%e5%87%bd%e6%95%b0%e7%ad%be%e5%90%8d%e4%b8%ad%e4%bd%bf%e7%94%a8%e6%b3%9b%e5%9e%8b aria-label=å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹>å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹</a></li><li><a href=#%e7%bb%93%e6%9e%84%e4%bd%93%e5%ae%9a%e4%b9%89%e4%b8%ad%e4%bd%bf%e7%94%a8%e6%b3%9b%e5%9e%8b aria-label=ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹</a></li><li><a href=#%e6%9e%9a%e4%b8%be%e5%ae%9a%e4%b9%89%e4%b8%ad%e4%bd%bf%e7%94%a8%e6%b3%9b%e5%9e%8b aria-label=æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹</a></li><li><a href=#%e6%96%b9%e6%b3%95%e5%ae%9a%e4%b9%89%e4%b8%ad%e4%bd%bf%e7%94%a8%e6%b3%9b%e5%9e%8b aria-label=æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹</a></li></ul></li><li><a href=#trait aria-label=trait>trait</a><ul><li><a href=#%e5%ae%9a%e4%b9%89trait aria-label=å®šä¹‰trait>å®šä¹‰trait</a></li><li><a href=#%e4%b8%ba%e7%b1%bb%e5%9e%8b%e5%ae%9e%e7%8e%b0trait aria-label=ä¸ºç±»å‹å®ç°trait>ä¸ºç±»å‹å®ç°trait</a></li><li><a href=#trait%e7%9a%84%e9%bb%98%e8%ae%a4%e5%ae%9e%e7%8e%b0 aria-label=traitçš„é»˜è®¤å®ç°>traitçš„é»˜è®¤å®ç°</a></li><li><a href=#%e4%bd%bf%e7%94%a8trait aria-label=ä½¿ç”¨trait>ä½¿ç”¨trait</a></li><li><a href=#%e6%b3%9b%e5%9e%8b%e7%bb%93%e6%9e%84%e4%bd%93%e5%ae%9e%e7%8e%b0%e7%89%b9%e5%ae%9atrait-bound%e6%96%b9%e6%b3%95 aria-label="æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait boundæ–¹æ³•">æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait boundæ–¹æ³•</a></li><li><a href=#blanket-implementations aria-label="Blanket implementations">Blanket implementations</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=æ³›å‹>æ³›å‹<a hidden class=anchor aria-hidden=true href=#æ³›å‹>#</a></h2><h3 id=å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹>å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹<a hidden class=anchor aria-hidden=true href=#å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹>#</a></h3><p>å°è¯•ç¼–å†™ä¸€ä¸ªå¯»æ‰¾æ•°ç»„ä¸­æœ€å¤§å€¼çš„å‡½æ•°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>largest_i32</span>(list: <span style=color:#66d9ef>&amp;</span>[<span style=color:#66d9ef>i32</span>]) -&gt; <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>i32</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> largest <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>list[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> list.iter() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> item <span style=color:#f92672>&gt;</span> largest {
</span></span><span style=display:flex><span>            largest <span style=color:#f92672>=</span> item;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    largest
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¯¥å‡½æ•°ä»…æ”¯æŒi32ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªcharç±»å‹çš„largest_charå‡½æ•°ï¼Œåº”è¯¥ä¼šæ˜¯è¿™æ ·:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>largest_char</span>(list: <span style=color:#66d9ef>&amp;</span>[<span style=color:#66d9ef>char</span>]) -&gt; <span style=color:#66d9ef>&amp;</span><span style=color:#66d9ef>char</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> largest <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>list[<span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> list.iter() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> item <span style=color:#f92672>&gt;</span> largest {
</span></span><span style=display:flex><span>            largest <span style=color:#f92672>=</span> item;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    largest
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä¸€äº›é€»è¾‘é‡å¤ï¼Œä»…ç±»å‹ä¸åŒçš„ä»£ç ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„ç±»å‹è€Œä¸éœ€è¦æ‰‹å†™å®ƒä»¬çš„largestå‡½æ•°ï¼Œå¯ä»¥å°†è¿™éƒ¨åˆ†ä»£ç ä¸­çš„ç±»å‹ä½¿ç”¨æ³›å‹æ›¿æ¢ã€‚</p><p>æ‰€ä»¥æ³›å‹ç‰ˆæœ¬åº”è¯¥æ˜¯è¿™ä¹ˆå†™çš„:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>largest_t</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span>(list: <span style=color:#66d9ef>&amp;</span>[T]) -&gt; <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>T</span> {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#66d9ef>mut</span> largest <span style=color:#f92672>=</span> <span style=color:#f92672>&amp;</span>list[<span style=color:#ae81ff>0</span>];  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> item <span style=color:#66d9ef>in</span> list.iter() {  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> item <span style=color:#f92672>&gt;</span> largest {  
</span></span><span style=display:flex><span>            largest <span style=color:#f92672>=</span> item;  
</span></span><span style=display:flex><span>        }  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    largest  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>é¦–å…ˆæˆ‘ä»¬åœ¨å‡½æ•°ååæ·»åŠ äº†<code>&lt;T></code>ï¼Œè¿™æ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œå‚æ•°listä¹Ÿå˜æˆäº†ä¸€ä¸ªæ³›å‹sliceï¼ŒåŒæ ·çš„ï¼Œè¿”å›å€¼ä¹Ÿè¿›è¡Œäº†ä¿®æ”¹ï¼Œè€Œæˆ‘ä»¬çš„å‡½æ•°ä½“ä¸éœ€è¦ä»»ä½•ä¿®æ”¹ã€‚</p><p>æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è°ƒç”¨è¿™ä¸ªå‡½æ•°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> number_list <span style=color:#f92672>=</span> vec![<span style=color:#ae81ff>34</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>25</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>65</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> result <span style=color:#f92672>=</span> largest_t(<span style=color:#f92672>&amp;</span>number_list);
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;The largest number is </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, result);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> char_list <span style=color:#f92672>=</span> vec![<span style=color:#e6db74>&#39;y&#39;</span>, <span style=color:#e6db74>&#39;m&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>, <span style=color:#e6db74>&#39;q&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> result <span style=color:#f92672>=</span> largest_t(<span style=color:#f92672>&amp;</span>char_list);
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;The largest char is </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, result);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>i32å’Œcharç±»å‹çš„<code>largest_t</code>æ–¹æ³•è°ƒç”¨å½¢å¼æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºrustå¯ä»¥é€šè¿‡ä¼ å…¥çš„å‚æ•°ç±»å‹è‡ªè¡Œæ¨æ–­æ³›å‹Tçš„å…·ä½“ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ä¸º<code>largest_t</code>æä¾›å…·ä½“ç±»å‹ä¿¡æ¯ã€‚</p><style type=text/css media=screen>html{--color-alert-info-text:#24292e;--color-alert-info-bg:#dbedff;--color-alert-info-border:rgba(4, 66, 137, 0.2);--color-alert-warn-text:#24292e;--color-alert-warn-bg:#fffbdd;--color-alert-warn-border:rgba(176, 136, 0, 0.2);--color-alert-error-text:#24292e;--color-alert-error-bg:#ffe3e6;--color-alert-error-border:rgba(158, 28, 35, 0.2);--color-alert-success-text:#24292e;--color-alert-success-bg:#dcffe4;--color-alert-success-border:rgba(23, 111, 44, 0.2)}html[data-theme=dark]{--color-alert-info-text:#79c0ff;--color-alert-info-bg:rgba(56, 139, 253, 0.1);--color-alert-info-border:rgba(56, 139, 253, 0.4);--color-alert-warn-text:#e3b341;--color-alert-warn-bg:rgba(187, 128, 9, 0.1);--color-alert-warn-border:rgba(187, 128, 9, 0.4);--color-alert-error-text:#ff7b72;--color-alert-error-bg:rgba(248, 81, 73, 0.1);--color-alert-error-border:rgba(248, 81, 73, 0.4);--color-alert-success-text:#56d364;--color-alert-success-bg:rgba(46, 160, 67, 0.1);--color-alert-success-border:rgba(46, 160, 67, 0.4)}.tips{position:relative;padding:20px 16px;margin-bottom:20px;border-style:solid;border-width:1px;border-radius:6px;border-left-style:solid;border-left-width:6px}.tips.info{color:var(--color-alert-info-text);background-image:linear-gradient(var(--color-alert-info-bg),var(--color-alert-info-bg));border-color:var(--color-alert-info-border)}.tips.warn{color:var(--color-alert-warn-text);background-image:linear-gradient(var(--color-alert-warn-bg),var(--color-alert-warn-bg));border-color:var(--color-alert-warn-border)}.tips.error{color:var(--color-alert-error-text);background-image:linear-gradient(var(--color-alert-error-bg),var(--color-alert-error-bg));border-color:var(--color-alert-error-border)}.tips.success{color:var(--color-alert-success-text);background-image:linear-gradient(var(--color-alert-success-bg),var(--color-alert-success-bg));border-color:var(--color-alert-success-border)}#tips-title{font-size:19px;font-weight:800;margin-bottom:10px}</style><div class="tips warn">ä½†æ˜¯è¿™ä¸ª<code>largest_t</code>å‡½æ•°ç›®å‰è¿˜æ˜¯æ— æ³•è¿è¡Œçš„:
<img loading=lazy src=https://yicixin-blog-image.oss-accelerate.aliyuncs.com/img/202301161618729.png alt>
å› ä¸ºæˆ‘ä»¬è¿˜å°‘è€ƒè™‘äº†ä¸€ä»¶äº‹ï¼Œæˆ‘ä»¬çš„å‡½æ•°ä½“ä¸­å«æœ‰äº†<code>&amp;T</code>çš„æ¯”è¾ƒæ“ä½œï¼Œä½†å½“å‰è¿™ä¸ªæ³›å‹å‚æ•°Tä»£è¡¨äº†ä»»æ„ç±»å‹ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰ç±»å‹éƒ½èƒ½å¤Ÿæ”¯æŒæ¯”è¾ƒæ“ä½œç¬¦ï¼Œå¯¹äºä¸æ”¯æŒæ¯”è¾ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬åº”è¯¥é™åˆ¶å®ƒçš„ä¼ å…¥ã€‚
ç¼–è¯‘å™¨ç»™å‡ºäº†æç¤ºï¼Œè€ƒè™‘å¯¹ç±»å‹å‚æ•°TåŠ ä¸Šé™åˆ¶ï¼Œç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨<code>&lt;T: std::cmp::PartialOrd></code>ï¼Œè¿™æ˜¯ä¸€ä¸ªtraitï¼Œæˆ‘ä»¬åæ–‡ä¼šè§£æï¼Œå®ƒåœ¨è¿™é‡Œçš„ä½œç”¨å°±æ˜¯é™åˆ¶æ³›å‹å‚æ•°Tçš„å…·ä½“ç±»å‹å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ã€‚
æ·»åŠ ä¸Šè¿™ä¸ªtraitåï¼Œä»£ç å°±å¯ä»¥æ‰§è¡Œäº†ã€‚</div><p>é™¤äº†åœ¨å‡½æ•°ç­¾åä¸­ä½¿ç”¨æ³›å‹å‚æ•°æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼Œå®šä¹‰ç»“æ„ä½“å’Œæšä¸¾æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹å‚æ•°ã€‚</p><h3 id=ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹<a hidden class=anchor aria-hidden=true href=#ç»“æ„ä½“å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    x: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>    y: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> integer <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>5</span>, y: <span style=color:#ae81ff>10</span> }; <span style=color:#75715e>// âœ…
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> float <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>1.0</span>, y: <span style=color:#ae81ff>4.0</span> }; <span style=color:#75715e>// âœ…
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> e <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>1</span>, y: <span style=color:#ae81ff>4.0</span> }; <span style=color:#75715e>// âŒ  å®ä¾‹åŒ–æ—¶xå’Œyçš„å…·ä½“ç±»å‹ä¸ä¸€è‡´
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>æ³›å‹å‚æ•°çš„å£°æ˜ä½äºç»“æ„ä½“åç§°ä¹‹åï¼Œä½¿ç”¨å°–æ‹¬å·åŒ…è£¹ï¼Œåœ¨æˆå‘˜å®šä¹‰ä¸­å¯ä»¥ä½¿ç”¨ã€‚
åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»…å£°æ˜äº†ä¸€ä¸ªæ³›å‹å‚æ•°Tï¼Œæˆå‘˜xå’Œæˆå‘˜yéƒ½æ˜¯Tç±»å‹ï¼Œæ‰€ä»¥xå’Œyå¯¹åº”çš„å…·ä½“ç±»å‹ä¹Ÿæ˜¯ä¸€è‡´çš„ï¼Œä¾‹å¦‚éƒ½æ˜¯<code>i32</code>æˆ–è€…éƒ½æ˜¯<code>f64</code>ã€‚
å¦‚æœå¸Œæœ›xå’Œyå¯ä»¥æ˜¯ä¸åŒç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ä¸¤ä¸ªæ³›å‹å‚æ•°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    x: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>    y: <span style=color:#a6e22e>U</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> both_integer <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>5</span>, y: <span style=color:#ae81ff>10</span> };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> both_float <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>1.0</span>, y: <span style=color:#ae81ff>4.0</span> };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> integer_and_float <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>5</span>, y: <span style=color:#ae81ff>4.0</span> };
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹<a hidden class=anchor aria-hidden=true href=#æšä¸¾å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>#</a></h3><p>æšä¸¾å®šä¹‰ä½¿ç”¨æ³›å‹ä¹‹å‰å·²ç»è§è¿‡äº†:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>enum</span> Option<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    Some(T),
</span></span><span style=display:flex><span>    None,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>enum</span> Result<span style=color:#f92672>&lt;</span>T, E<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    Ok(T),
</span></span><span style=display:flex><span>    Err(E),
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹<a hidden class=anchor aria-hidden=true href=#æ–¹æ³•å®šä¹‰ä¸­ä½¿ç”¨æ³›å‹>#</a></h3><p>æ–¹æ³•å®šä¹‰å¯ä»¥åœ¨æ³›å‹å‚æ•°ä¸Šå®šä¹‰ï¼Œä¹Ÿå¯ä»¥é’ˆå¯¹å…·ä½“ç±»å‹å®šä¹‰</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    x: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>    y: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Point<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>x</span>(<span style=color:#f92672>&amp;</span>self) -&gt; <span style=color:#66d9ef>&amp;</span><span style=color:#a6e22e>T</span> {
</span></span><span style=display:flex><span>        <span style=color:#f92672>&amp;</span>self.x
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// ä»…Point&lt;f32&gt;æ‹¥æœ‰
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span> Point<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>f32</span><span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>distance_from_origin</span>(<span style=color:#f92672>&amp;</span>self) -&gt; <span style=color:#66d9ef>f32</span> {
</span></span><span style=display:flex><span>        (self.x.powi(<span style=color:#ae81ff>2</span>) <span style=color:#f92672>+</span> self.y.powi(<span style=color:#ae81ff>2</span>)).sqrt()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> p <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>5</span>, y: <span style=color:#ae81ff>10</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;p.x = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, p.x());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    x: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>    y: <span style=color:#a6e22e>U</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span> Point<span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// åœ¨æ–¹æ³•çš„ç­¾åä¸­å®šä¹‰å¦å¤–çš„æ³›å‹å‚æ•°&lt;V, W&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>mixup</span><span style=color:#f92672>&lt;</span>V, W<span style=color:#f92672>&gt;</span>(self, other: <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>V, W<span style=color:#f92672>&gt;</span>) -&gt; <span style=color:#a6e22e>Point</span><span style=color:#f92672>&lt;</span>T, W<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>        Point {
</span></span><span style=display:flex><span>            x: <span style=color:#a6e22e>self</span>.x,
</span></span><span style=display:flex><span>            y: <span style=color:#a6e22e>other</span>.y,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> p1 <span style=color:#f92672>=</span> Point { x: <span style=color:#ae81ff>5</span>, y: <span style=color:#ae81ff>10.4</span> };
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> p2 <span style=color:#f92672>=</span> Point { x: <span style=color:#e6db74>&#34;Hello&#34;</span>, y: <span style=color:#a6e22e>&#39;c&#39;</span> };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> p3 <span style=color:#f92672>=</span> p1.mixup(p2);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;p3.x = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>, p3.y = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, p3.x, p3.y);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="tips info"><p id=tips-title>rustçš„æ³›å‹åŸç†</p>rustçš„æ³›å‹åŸç†æ˜¯ç”Ÿæˆä»£ç å¼ï¼Œç¼–è¯‘å™¨æ ¹æ®æˆ‘ä»¬è°ƒç”¨æ³›å‹ä»£ç æ—¶æä¾›çš„ç±»å‹ï¼Œç”Ÿæˆå¯¹åº”çš„å…·ä½“ç±»å‹ä»£ç ï¼Œä¾‹å¦‚ä¸Šæ–‡ä¸­ï¼Œç¼–è¯‘å™¨ä¼šä¸ºæ³›å‹å‡½æ•°<code>largest_t</code>ç”Ÿæˆå…·ä½“çš„<code>i32</code>ç‰ˆæœ¬å’Œ<code>char</code>ç‰ˆæœ¬ï¼Œè¿™å’Œä½ æ‰‹å†™é‡å¤ä»£ç æ²¡æœ‰åŒºåˆ«ã€‚æ‰€ä»¥ä»ç¼–è¯‘åå¾—åˆ°çš„æœ€ç»ˆç»“æœæ¥çœ‹ï¼Œä½¿ç”¨æ³›å‹æ²¡æœ‰æ€§èƒ½ä¸Šçš„æŸå¤±ã€‚</div><h2 id=trait>trait<a hidden class=anchor aria-hidden=true href=#trait>#</a></h2><p>traitåœ¨rustä¸­å¸¸å’Œæ³›å‹æ­é…ä½¿ç”¨ï¼Œå®ƒå’Œgoè¯­è¨€ä¸­çš„æ¥å£(<em>interface</em>)å¾ˆåƒï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯ï¼Œgoè¯­è¨€ä¸­æ¥å£çš„å®ç°æ˜¯éšå¼çš„ï¼Œè€Œrustä¸­å®ç°traitéœ€è¦æ˜¾å¼çš„å£°æ˜ã€‚</p><div class="tips info"><p id=tips-title>å¦‚ä½•ç†è§£traitå’Œæ³›å‹çš„å…³ç³»</p>å½“æˆ‘ä»¬ç®€å•å£°æ˜ä¸€ä¸ªæ³›å‹<code>T</code>ï¼Œæ­¤æ—¶å®ƒå¯ä»¥ä»£è¡¨ä»»æ„ç±»å‹ï¼Œä½†ä»»æ„ç±»å‹å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹Tåšä»»æ„æ“ä½œï¼Œç›¸åï¼Œæ­¤æ—¶æˆ‘ä»¬æ— æ³•å¯¹Tåšä»»ä½•æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•æ§åˆ¶å¤–éƒ¨ä¼ å…¥çš„å…·ä½“ç±»å‹ä¸€å®šæ”¯æŒæˆ‘ä»¬æ‰€åšçš„æ“ä½œã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯¹Tè¦åšçš„æ“ä½œè¶Šå¤šï¼Œç›¸åº”å¯¹Tçš„é™åˆ¶å°±è¶Šå¤šã€‚traitå°±æ˜¯ç”¨æ¥é™„åŠ è¿™äº›é™åˆ¶çš„æ‰‹æ®µã€‚
æˆ–è€…æ¢ä¸ªè§’åº¦ï¼Œtraitæ˜¯ç»™æ³›å‹Tæä¾›è¡Œä¸ºçš„æ‰‹æ®µï¼Œä¸€ä¸ªå…‰ç§ƒç§ƒçš„æ³›å‹Tï¼Œå®ƒä¸å…·æœ‰ä»»ä½•è¡Œä¸ºï¼Œé€šè¿‡traitå¯ä»¥ç»™æ³›å‹Tæ·»åŠ è¡Œä¸ºï¼Œä»è€Œæ”¯æŒæˆ‘ä»¬éœ€è¦çš„æ“ä½œã€‚</div><h3 id=å®šä¹‰trait>å®šä¹‰trait<a hidden class=anchor aria-hidden=true href=#å®šä¹‰trait>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨traitå…³é”®å­—ï¼Œpubå…³é”®å­—å…è®¸åœ¨å…¶ä»–crateå®ç°è¯¥trait
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> Summary {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// ä»…ç»™æ–¹æ³•ç­¾åè€Œä¸éœ€è¦å‡½æ•°ä½“ï¼Œä»¥åˆ†å·ç»“å°¾
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=ä¸ºç±»å‹å®ç°trait>ä¸ºç±»å‹å®ç°trait<a hidden class=anchor aria-hidden=true href=#ä¸ºç±»å‹å®ç°trait>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NewsArticle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> headline: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> location: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> author: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> content: String,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨impl+forå…³é”®å­—
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span> Summary <span style=color:#66d9ef>for</span> NewsArticle {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// æä¾›å…·ä½“å‡½æ•°ä½“
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        format!(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>, by </span><span style=color:#e6db74>{}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>)&#34;</span>, self.headline, self.author, self.location)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class="tips warn"><p id=tips-title>å®ç°traitçš„ä½œç”¨åŸŸé—®é¢˜</p>ä½ å¯ä»¥åœ¨è‡ªå·±çš„crateå†…ä¸ºå†…éƒ¨ç±»å‹å®ç°å¤–éƒ¨å…¬å…±çš„traitï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„crateä¸­ä¸ºå¤–éƒ¨çš„ç±»å‹å®ç°æˆ‘ä»¬å†…éƒ¨çš„traitã€‚
ä½†æ˜¯ä½ ä¸èƒ½åœ¨è‡ªå·±çš„crateä¸­ï¼Œä¸ºå¤–éƒ¨ç±»å‹å®ç°å¤–éƒ¨çš„traitã€‚è¿™ä¸ªè§„åˆ™æ˜¯ä¸ºäº†é™åˆ¶ä¸¤ä¸ªcrateéƒ½ä¸ºåŒä¸€ä¸ªç±»å‹å®ç°åŒä¸€ä¸ªtraitï¼Œrustç¼–è¯‘å™¨æ— æ³•çŸ¥é“åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚</div><h3 id=traitçš„é»˜è®¤å®ç°>traitçš„é»˜è®¤å®ç°<a hidden class=anchor aria-hidden=true href=#traitçš„é»˜è®¤å®ç°>#</a></h3><p>æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰traitæ—¶å°±ä¸ºæ–¹æ³•ç­¾åæä¾›å…·ä½“å®ç°ï¼Œè¿™ç§å®ç°ç§°ä¸ºé»˜è®¤å®ç°ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> Summary {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        String::from(<span style=color:#e6db74>&#34;(Read more...)&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä¸ºç±»å‹å®ç°traitæ—¶ï¼Œå¦‚æœåªæœ‰è¯¥traitä»…æœ‰é»˜è®¤å®ç°ï¼Œç±»å‹å¯ä»¥ä¸æä¾›å…·ä½“å®ç°è€Œç›´æ¥ç»§æ‰¿è¯¥traitçš„æ‰€ä»¥é»˜è®¤å®ç°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> Summary {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        String::from(<span style=color:#e6db74>&#34;(Read more...)&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NewsArticle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> headline: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> location: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> author: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> content: String,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// å…·ä½“å®ç°ç•™ç©ºå³å¯
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span> Summary <span style=color:#66d9ef>for</span> NewsArticle {}
</span></span></code></pre></div><p>å¦‚æœç±»å‹å®ç°traitæ—¶ä¸ºé»˜è®¤å®ç°ä¹Ÿæä¾›äº†å…·ä½“å®ç°ï¼Œåˆ™ä¼šå‘ç”Ÿé‡è½½ã€‚</p><p>å¦‚æœtraité™¤äº†é»˜è®¤å®ç°å¤–è¿˜æœ‰å…¶ä»–æ–¹æ³•å®šä¹‰ï¼Œåˆ™ç±»å‹å®ç°è¯¥traitæ—¶ï¼Œéœ€è¦ä¸ºæ‰€æœ‰éé»˜è®¤å®ç°æä¾›å…·ä½“å®ç°:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> Summary {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        String::from(<span style=color:#e6db74>&#34;(Read more...)&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_author</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NewsArticle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> headline: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> location: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> author: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> content: String,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// NewsArticleç›´æ¥ç»§æ‰¿äº†summarizeï¼Œè€Œsummarize_authorå¿…é¡»æä¾›å…·ä½“å®ç°
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span> Summary <span style=color:#66d9ef>for</span> NewsArticle {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_author</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        format!(<span style=color:#e6db74>&#34;@</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.author)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å› ä¸ºåœ¨å®šä¹‰traitæ—¶ï¼Œé»˜è®¤å®ç°å°±æä¾›äº†å…·ä½“ä»£ç ï¼Œæ‰€ä»¥åœ¨é»˜è®¤å®ç°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨è¯¥traitçš„å…¶ä»–é»˜è®¤å®ç°æˆ–æ–¹æ³•:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>trait</span> Summary {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        format!(<span style=color:#e6db74>&#34;author is </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>, content is </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.summarize_author(), self.summarize_content())
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_author</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_content</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>NewsArticle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> headline: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> location: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> author: String,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pub</span> content: String,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> Summary <span style=color:#66d9ef>for</span> NewsArticle {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_author</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        format!(<span style=color:#e6db74>&#34;@@@</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.author)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>summarize_content</span>(<span style=color:#f92672>&amp;</span>self) -&gt; String {
</span></span><span style=display:flex><span>        format!(<span style=color:#e6db74>&#34;!!!</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.content)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> article <span style=color:#f92672>=</span> NewsArticle {
</span></span><span style=display:flex><span>        headline: String::from(<span style=color:#e6db74>&#34;headline&#34;</span>),
</span></span><span style=display:flex><span>        location: String::from(<span style=color:#e6db74>&#34;location&#34;</span>),
</span></span><span style=display:flex><span>        author: String::from(<span style=color:#e6db74>&#34;author&#34;</span>),
</span></span><span style=display:flex><span>        content: String::from(<span style=color:#e6db74>&#34;content&#34;</span>),
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, article.summarize());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>é»˜è®¤å®ç°ç‰¹æ€§ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¿«é€Ÿä¸ºç±»å‹æ·»åŠ æ–¹æ³•ï¼Œè¿™åœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­é€šå¸¸éœ€è¦ç”¨ç»§æ‰¿æˆ–ç»„åˆå…¶ä»–ç»“æ„ä½“çš„å½¢å¼å®ç°ã€‚</p><h3 id=ä½¿ç”¨trait>ä½¿ç”¨trait<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨trait>#</a></h3><p>æ­£å¦‚goä¸­çš„æ¥å£ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨traitæ›¿æ¢å…·ä½“ç±»å‹ï¼Œè¿™ä½¿å¾—è¯¥å‡½æ•°ä¸å†ä¸æŸä¸€å…·ä½“ç±»å‹è€¦åˆï¼Œä»…ä¸traitæ‰€ä»£è¡¨çš„ä¸€ç±»è¡Œä¸ºç›¸å…³ï¼Œå³â€”â€”é¢å¯¹æŠ½è±¡è€Œä¸æ˜¯å…·ä½“ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨impl+traitæ›¿æ¢å…·ä½“ç±»å‹ï¼Œitemå‚æ•°å…è®¸ä¼ å…¥æ‰€æœ‰å®ç°äº†Summaryçš„ç±»å‹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span>(item: <span style=color:#a6e22e>impl</span> Summary) {
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;Breaking news! </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, item.summarize());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å‡½æ•°ä¸­çš„<code>impl+trait</code>å½¢å¼å…¶å®æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨æ¯”è¾ƒç›´è§‚ç®€å•çš„åœºæ™¯ä½¿ç”¨å®ƒã€‚è€Œå®ƒåŸæœ¬çš„å½¢å¼æ˜¯:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Summary</span><span style=color:#f92672>&gt;</span>(item: <span style=color:#a6e22e>T</span>) {
</span></span><span style=display:flex><span>    println!(<span style=color:#e6db74>&#34;Breaking news! </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, item.summarize());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿™ç§å†™æ³•ç§°ä¸º<code>trait bound</code>ï¼Œ<code>trait bound</code>ä¸æ³›å‹å‚æ•°æ­é…ï¼Œè¡¨è¾¾æ³›å‹å‚æ•°çš„å¯ç”¨è¡Œä¸ºã€‚ä½¿ç”¨<code>trait bound</code>çš„å†™æ³•å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„åœºæ™¯ã€‚</p><div class="tips warn"><p id=tips-title>impl+traitå’Œtrait boundçš„åŒºåˆ«</p><p>è¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼Œitem1å’Œitem2å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span>(item1: <span style=color:#a6e22e>impl</span> Summary, item2: <span style=color:#a6e22e>impl</span> Summary)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Summary</span>, U: <span style=color:#a6e22e>Summary</span><span style=color:#f92672>&gt;</span>(item1:<span style=color:#a6e22e>T</span>, item2:<span style=color:#a6e22e>U</span>)
</span></span></code></pre></div><p>å¦‚æœæˆ‘ä»¬éœ€è¦é™åˆ¶ä¼ å…¥çš„item1å’Œitem2å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ï¼Œåˆ™åªèƒ½ç”¨<code>trait bound</code>è¯­æ³•:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Summary</span><span style=color:#f92672>&gt;</span>(item1: <span style=color:#a6e22e>T</span>, item2: <span style=color:#a6e22e>T</span>)
</span></span></code></pre></div></div><p>å‡½æ•°å‚æ•°å¯ä»¥ä½¿ç”¨çš„traitä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>+</code>æ¥åŠ å…¥æ›´å¤š<code>trait</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span>(item: <span style=color:#a6e22e>impl</span> Summary <span style=color:#f92672>+</span> Display)
</span></span><span style=display:flex><span>or
</span></span><span style=display:flex><span><span style=color:#66d9ef>pub</span> <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>notify</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Summary</span> <span style=color:#f92672>+</span> Display<span style=color:#f92672>&gt;</span>(item: <span style=color:#a6e22e>T</span>)
</span></span></code></pre></div><p>è¿™è¡¨ç¤º<code>item</code>å‚æ•°éœ€è¦åŒæ—¶å®ç°<code>Summary</code>å’Œ<code>Display</code>è¿™ä¸¤ä¸ª<code>trait</code>ã€‚</p><p>rustè¿˜æä¾›äº†whereè¯­æ³•ä¼˜åŒ–é•¿ä¸²çš„<code>trait bound</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>some_function</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Display</span> <span style=color:#f92672>+</span> Clone, U: Clone <span style=color:#f92672>+</span> Debug<span style=color:#f92672>&gt;</span>(t: <span style=color:#a6e22e>T</span>, u: <span style=color:#a6e22e>U</span>) -&gt; <span style=color:#66d9ef>i32</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>some_function</span><span style=color:#f92672>&lt;</span>T, U<span style=color:#f92672>&gt;</span>(t: <span style=color:#a6e22e>T</span>, u: <span style=color:#a6e22e>U</span>) -&gt; <span style=color:#66d9ef>i32</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>where</span> T: <span style=color:#a6e22e>Display</span> <span style=color:#f92672>+</span> Clone,
</span></span><span style=display:flex><span>          U: Clone <span style=color:#f92672>+</span> Debug
</span></span><span style=display:flex><span>{}
</span></span></code></pre></div><h3 id=æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait-boundæ–¹æ³•>æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait boundæ–¹æ³•<a hidden class=anchor aria-hidden=true href=#æ³›å‹ç»“æ„ä½“å®ç°ç‰¹å®štrait-boundæ–¹æ³•>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>use</span> std::fmt::Display;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>Pair</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    x: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>    y: <span style=color:#a6e22e>T</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> Pair<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>new</span>(x: <span style=color:#a6e22e>T</span>, y: <span style=color:#a6e22e>T</span>) -&gt; <span style=color:#a6e22e>Self</span> {
</span></span><span style=display:flex><span>        Self {
</span></span><span style=display:flex><span>            x,
</span></span><span style=display:flex><span>            y,
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä»…å½“Tå®ç°äº†Display + PartialOrdæ—¶ï¼Œè¯¥Pait&lt;T&gt;æ‰èƒ½è°ƒç”¨cmp_displayæ–¹æ³•
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Display</span> <span style=color:#f92672>+</span> PartialOrd<span style=color:#f92672>&gt;</span> Pair<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>cmp_display</span>(<span style=color:#f92672>&amp;</span>self) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> self.x <span style=color:#f92672>&gt;=</span> self.y {
</span></span><span style=display:flex><span>            println!(<span style=color:#e6db74>&#34;The largest member is x = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.x);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            println!(<span style=color:#e6db74>&#34;The largest member is y = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#34;</span>, self.y);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>struct</span> <span style=color:#a6e22e>I32</span> {  
</span></span><span style=display:flex><span>    x: <span style=color:#66d9ef>i32</span>,  
</span></span><span style=display:flex><span>}  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>impl</span> I32 {  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>new</span>(x: <span style=color:#66d9ef>i32</span>) -&gt; <span style=color:#a6e22e>Self</span> {  
</span></span><span style=display:flex><span>        Self {  
</span></span><span style=display:flex><span>            x,  
</span></span><span style=display:flex><span>        }  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fn</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// i32ç±»å‹å®ç°äº†Display + PartialOrd
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> pair <span style=color:#f92672>=</span> Pair::new(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>    pair.cmp_display();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#75715e>// f64ä¹Ÿå¯ä»¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>let</span> pair <span style=color:#f92672>=</span> Pair::new(<span style=color:#ae81ff>3.0</span>, <span style=color:#ae81ff>2.0</span>);
</span></span><span style=display:flex><span>    pair.cmp_display();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// âŒè‡ªå®šä¹‰çš„I32ç±»å‹è°ƒç”¨å¤±è´¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>let</span> pair <span style=color:#f92672>=</span> Pair::new(I32::new(<span style=color:#ae81ff>2</span>), I32::new(<span style=color:#ae81ff>3</span>));  
</span></span><span style=display:flex><span>	pair.cmp_display();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=blanket-implementations>Blanket implementations<a hidden class=anchor aria-hidden=true href=#blanket-implementations>#</a></h3><p>å¯¹ä»»ä½•æ»¡è¶³ç‰¹å®š trait bound çš„ç±»å‹å®ç° trait è¢«ç§°ä¸ºÂ <em>blanket implementations</em>ï¼Œä»–ä»¬è¢«å¹¿æ³›çš„ç”¨äº Rust æ ‡å‡†åº“ä¸­ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡†åº“ä¸ºä»»ä½•å®ç°äº†Â <code>Display</code>Â trait çš„ç±»å‹å®ç°äº†Â <code>ToString</code>Â traitã€‚è¿™ä¸ªÂ <code>impl</code>Â å—çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>impl</span><span style=color:#f92672>&lt;</span>T: <span style=color:#a6e22e>Display</span><span style=color:#f92672>&gt;</span> ToString <span style=color:#66d9ef>for</span> T {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// --snip--
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>å› ä¸ºæ ‡å‡†åº“æœ‰äº†è¿™äº› blanket implementationï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•å®ç°äº†Â <code>Display</code>Â trait çš„ç±»å‹è°ƒç”¨ç”±Â <code>ToString</code>Â å®šä¹‰çš„Â <code>to_string</code>Â æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ•´å‹è½¬æ¢ä¸ºå¯¹åº”çš„Â <code>String</code>Â å€¼ï¼Œå› ä¸ºæ•´å‹å®ç°äº†Â <code>Display</code>ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#66d9ef>let</span> s <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.</span>to_string();
</span></span></code></pre></div><div class="tips info">è¿™é‡Œæ„Ÿè§‰å’Œé»˜è®¤å®ç°æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºå®ç°äº†traitçš„ç±»å‹å¢åŠ æ–¹æ³•ã€‚</div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.yici.xin/tags/rust/>rust</a></li><li><a href=https://www.yici.xin/tags/%E6%B3%9B%E5%9E%8B/>æ³›å‹</a></li><li><a href=https://www.yici.xin/tags/trait/>trait</a></li></ul><nav class=paginav><a class=prev href=https://www.yici.xin/post/tech/%E8%BD%AC%E6%8D%A2bytes%E5%92%8Cstring%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>è½¬æ¢byteså’Œstringçš„æœ€ä½³å®è·µ</span></a>
<a class=next href=https://www.yici.xin/post/tech/rust%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>Rusté”™è¯¯å¤„ç†</span></a></nav></footer><script type=text/javascript>let giscusTheme=localStorage.getItem("pref-theme")==="dark"?"dark_dimmed":"light",giscusAttributes={src:"https://giscus.app/client.js","data-repo":"yicixin/blog_comment","data-repo-id":"R_kgDOIr6QyQ","data-category":"Announcements","data-category-id":"DIC_kwDOIr6Qyc4CTSs3","data-mapping":"title","data-reactions-enabled":"1","data-emit-metadata":"0","data-theme":giscusTheme===null?"light":giscusTheme,"data-lang":"zh-CN",crossorigin:"anonymous","data-loading":"lazy",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([e,t])=>giscusScript.setAttribute(e,t));var article=document.getElementsByTagName("article")[0].appendChild(giscusScript);function changeGiscusTheme(){const e=localStorage.getItem("pref-theme")==="dark"?"light":"dark_dimmed";function t(e){const t=document.querySelector("iframe.giscus-frame");if(!t)return;t.contentWindow.postMessage({giscus:e},"https://giscus.app")}t({setConfig:{theme:e}})}const toggle=document.querySelector("#theme-toggle");toggle&&toggle.addEventListener("click",changeGiscusTheme)</script><script src=https://giscus.app/client.js data-repo=yicixin/blog_comment data-repo-id=R_kgDOIr6QyQ data-category=Announcements data-category-id=DIC_kwDOIr6Qyc4CTSs3 data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.yici.xin/>yicixin's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="ctrl\u002bc";function s(){t.innerHTML="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerHTML="ctrl\u002bc"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script src=https://code.jquery.com/jquery-1.12.4.min.js></script>
<script>$("code[class^=language] ").on("mouseover",function(){this.clientWidth<this.scrollWidth&&$(this).css("width","135%")}).on("mouseout",function(){$(this).css("width","100%"),$(".copy-code").css("right","4px")})</script></body></html>